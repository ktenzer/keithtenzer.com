<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
<link rel="icon" href="/assets/main/me.png">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Building Storage Services in OpenStack on NetApp - Part I of III - Keith Tenzer’s Blog</title>
<meta name="description" content="Welcome to part one of the three-part series on creating storage services in OpenStack on NetApp. In this post we will give a brief overview of OpenStack, discuss distribution options and setup a OpenStack environment using Red Hat RDO. In part two of this series we will look at how to configure NetApp storage for OpenStack environments. In part three we will create storage services in OpenStack built on NetApp storage.  Building Storage Services in OpenStack on NetApp - Part II of III Building Storage Services in OpenStack on NetApp - Part III of III  Overview OpenStack is an interrelated set of software components that enable you to build, manage and provision private or public cloud computing platforms. OpenStack pools compute, storage and networking resources together and allows virtual machines or other instances to be deployed using those resources on the fly enabling horizontal scaling.  OpenStack Projects Each OpenStack software component is considered its own project or program. It has its own development team, resources and project schedule. There are two important OpenStack project types:  Core projects - official projects with full access to OpenStack brand and assets Incubation projects - projects on an official track to become core projects with partial access to OpenStack branding and assets  The core projects for OpenStack are as follows:  Nova (compute) Cinder (block storage) Swift (object storage) Glance (images service) Keystone (identity and authentication) Horizon (dashboard and UI) Neutron (networking) Ceilometer (telemetry and stats) Heat (orchestration) Trove (database services) Sahara (data processing) Ironic (bare metal) Zaqar (queue services) Barbican (key management services) Designate (DNS services) Oslo (common libraries) TripleO (deployment)  Incubation projects such as Manilla which offers shared file services to OpenStack are very interesting to follow, however for deployments we should focus on the official core projects. OpenStack Distributions There is a lot of variation with OpenStack since it is a culmination of interrelated projects that form a cloud computing platform. You can certainly do your own custom deployment and just install the projects you need and define your own distribution however I would not recommend this, especially for production environments. The purpose of a distribution is to leverage the vendors expertise, wrap projects or dependencies together and give you a platform which can be supported. There are of course a plethora of distributions to choose from, even distribution methods. If you are interested in reviewing the distributions and support options visit the OpenStack marketplace. I would recommend choosing a distribution which supports the dependencies and someone who has a lot of experience as well as success in providing support for open source software. In addition to the supported distributions there is a very interesting option from Red Hat called RDO. The concept is very similar to what Red Hat does in regards to Fedora actually. RDO allows you to run either Fedora, Red Hat Enterprise Linux (RHEL) or CentOS and combines those platforms with the most current release of OpenStack. Deploying OpenStack using RDO The first step to building a cloud computing platform is a proof of concept. Moving your infrastructure to a cloud computing platform changes everything, including your business processes. It is definitely not something that happens over night. RDO is the perfect thing to use to standup a OpenStack environment using production Linux with production OpenStack software releases. Red Hat does not offer commercial support for RDO so once a decision is made to deploy a production OpenStack environment you will most likely want to use a distribution from the OpenStack marketplace. One can deploy RDO with either a manual or automatic configuration, we will discuss both. Steps for deploying RDO with manual configuration  Install Fedora 20 on bare metal  Note: I have tested Fedora 20 running on ESXi 5.5, just make sure you have virtual machine hardware version 10 (required for nested virtualization support)   Configure networking so that you have outbound access to the Internet Update current packages  sudo yum update -y  Setup RDO repositories  sudo yum install -y https://rdo.fedorapeople.org/rdo-release.rpm  Install packstack installer  sudo yum install -y openstack-packstack  Run packstack to install OpenStack  packstack --allinone   OpenStack takes a while to install, usually around 30 minutes, once the installation is done you can login into the horizon dashboard http://&lt;IP&gt;/dashboard. If you come across any issues check the workarounds.  Steps for deploying RDO with automatic configuration of NetApp Cinder Backend Automatic configuration allows us to generate an answers file that we can then customize. The advantage is that we are able to do some of the configuration during installation and in case we ever need to repeat the installation we have a blueprint. Using the answers file is the recommended way to install RDO. In this case we will configure Cinder to use NetApp storage backend through RDO packstack installer. packstack --gen-answer-file=~/packstack-answer.txt [code language=&quot;text&quot;] CONFIG_CINDER_BACKEND=netapp CONFIG_CINDER_NETAPP_STORAGE_FAMILY=ontap_cluster CONFIG_CINDER_NETAPP_STORAGE_PROTOCOL=nfs CONFIG_CINDER_NETAPP_VSERVER=&lt;storage virtual machine&gt; CONFIG_CINDER_NETAPP_HOSTNAME=&lt;cluster mgmt vserver&gt; CONFIG_CINDER_NETAPP_SERVER_PORT=80 CONFIG_CINDER_NETAPP_LOGIN=&lt;username&gt; CONFIG_CINDER_NETAPP_PASSWORD=&lt;password&gt; CONFIG_CINDER_NETAPP_NFS_SHARES_CONFIG=/etc/cinder/cdotNfs_exports.conf CONFIG_CINDER_NETAPP_COPYOFFLOAD_TOOL_PATH=/usr/bin/na_copyoffload_64 [/code] Note: before proceeding with the next step you need to make sure you have defined NFS exports in the /etc/cinder/cdotNfs_exports.conf and configured NetApp storage. These steps are explained in part II and part III of this series. packstack --answer-file=~/packstack-answer.txt For more information check the detailed guide on using packstack to install Cinder with NetApp storage backends. Authenticating to OpenStack environment After installation completes two tenants are created: admin and demo. Keystone will create two files under /root which provide credentials for both tenants.   cat /root/keystonerc_admin   [code language=&quot;text&quot;] export OS_USERNAME=admin export OS_TENANT_NAME=admin export OS_PASSWORD=d96c4ad2c6aa55af export OS_AUTH_URL=http://&lt;IP&gt;:5000/v2.0/ export PS1=&#39;[\u@\h \W(keystone_admin)]\$ &#39; [/code] You can use the admin user and password in the keystone source file to authenticate to Horizon or the OpenStack CLI. Create Private Network By default RDO will create a public network but for creating instances we need to use a private network. Since we would eventually like to connect instances to NetApp storage this network should be an internal private network that can reach our NetApp Storage Virtual Machines (SVMs). In my environment I used the same network for instances and SVM.  Under project-&gt;network-&gt;networks select the &quot;Create Network&quot; option to start the wizard Enter a name for network, I suggest private Add CIDR for network   &nbsp;  Add IP pool to be used for DHCP   Once our private network exists we are ready for instance creation Launch Instance At this point RDO has configured KVM as the hypervisor, installed OpenStack and configured OpenStack services. In order to verify things are working the best thing to do is to provision an instance. RDO configures one image called &quot;cirros&quot; and we can use this to test our installation.  In the Horizon dashboard under project-&gt;compute-&gt;instances select the &quot;Launch Instance&quot; button Give instance a name, select &quot;boot from image&quot; as boot source and select the &quot;cirros&quot; image    Select the &quot;networking&quot; tab and add the private network   &nbsp;  Launch the instance  The instance should start and be running shortly. This tests that the main core functionality between Nova (compute), Glance (images service) and Cinder (block storage). If things are working we are ready to configure NetApp storage for our OpenStack environment. Troubleshooting There are a few things I have run into and if you are having problems you should check them.  Disable &quot;SE Linux&quot;, I have seen issues with &quot;SE Linux&quot; and OpenStack  setenforce 0 To make change permanent edit /etc/selinux/config   Check hostname resolution  make sure hostname can be resolved if dns is not configured check /etc/hosts and /etc/sysconfig/network   Check networking make sure you can ping out to the private networks and management networks If you are having network issues, temporarily shutdown firewall and iptables until you have things working and then turn them back on Check to make sure your hardware supports virtualization  Intel: grep --color vmx /proc/cpuinfo AMD: grep --color svm /proc/cpuinfo   Check the Nova, Glance and Cinder logs  /var/log/nova /var/log/glance /var/log/cinder    The next post in the series will take a look at how to configure the NetApp storage system for OpenStack environments. (c) 2014 Keith Tenzer">


  <meta name="author" content="Keith Tenzer">
  
  <meta property="article:author" content="Keith Tenzer">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Keith Tenzer's Blog">
<meta property="og:title" content="Building Storage Services in OpenStack on NetApp - Part I of III">
<meta property="og:url" content="https://keithtenzer.com/openstack/creating-storage-services-in-openstack-on-netapp-part-i-of-iii/">


  <meta property="og:description" content="Welcome to part one of the three-part series on creating storage services in OpenStack on NetApp. In this post we will give a brief overview of OpenStack, discuss distribution options and setup a OpenStack environment using Red Hat RDO. In part two of this series we will look at how to configure NetApp storage for OpenStack environments. In part three we will create storage services in OpenStack built on NetApp storage.  Building Storage Services in OpenStack on NetApp - Part II of III Building Storage Services in OpenStack on NetApp - Part III of III  Overview OpenStack is an interrelated set of software components that enable you to build, manage and provision private or public cloud computing platforms. OpenStack pools compute, storage and networking resources together and allows virtual machines or other instances to be deployed using those resources on the fly enabling horizontal scaling.  OpenStack Projects Each OpenStack software component is considered its own project or program. It has its own development team, resources and project schedule. There are two important OpenStack project types:  Core projects - official projects with full access to OpenStack brand and assets Incubation projects - projects on an official track to become core projects with partial access to OpenStack branding and assets  The core projects for OpenStack are as follows:  Nova (compute) Cinder (block storage) Swift (object storage) Glance (images service) Keystone (identity and authentication) Horizon (dashboard and UI) Neutron (networking) Ceilometer (telemetry and stats) Heat (orchestration) Trove (database services) Sahara (data processing) Ironic (bare metal) Zaqar (queue services) Barbican (key management services) Designate (DNS services) Oslo (common libraries) TripleO (deployment)  Incubation projects such as Manilla which offers shared file services to OpenStack are very interesting to follow, however for deployments we should focus on the official core projects. OpenStack Distributions There is a lot of variation with OpenStack since it is a culmination of interrelated projects that form a cloud computing platform. You can certainly do your own custom deployment and just install the projects you need and define your own distribution however I would not recommend this, especially for production environments. The purpose of a distribution is to leverage the vendors expertise, wrap projects or dependencies together and give you a platform which can be supported. There are of course a plethora of distributions to choose from, even distribution methods. If you are interested in reviewing the distributions and support options visit the OpenStack marketplace. I would recommend choosing a distribution which supports the dependencies and someone who has a lot of experience as well as success in providing support for open source software. In addition to the supported distributions there is a very interesting option from Red Hat called RDO. The concept is very similar to what Red Hat does in regards to Fedora actually. RDO allows you to run either Fedora, Red Hat Enterprise Linux (RHEL) or CentOS and combines those platforms with the most current release of OpenStack. Deploying OpenStack using RDO The first step to building a cloud computing platform is a proof of concept. Moving your infrastructure to a cloud computing platform changes everything, including your business processes. It is definitely not something that happens over night. RDO is the perfect thing to use to standup a OpenStack environment using production Linux with production OpenStack software releases. Red Hat does not offer commercial support for RDO so once a decision is made to deploy a production OpenStack environment you will most likely want to use a distribution from the OpenStack marketplace. One can deploy RDO with either a manual or automatic configuration, we will discuss both. Steps for deploying RDO with manual configuration  Install Fedora 20 on bare metal  Note: I have tested Fedora 20 running on ESXi 5.5, just make sure you have virtual machine hardware version 10 (required for nested virtualization support)   Configure networking so that you have outbound access to the Internet Update current packages  sudo yum update -y  Setup RDO repositories  sudo yum install -y https://rdo.fedorapeople.org/rdo-release.rpm  Install packstack installer  sudo yum install -y openstack-packstack  Run packstack to install OpenStack  packstack --allinone   OpenStack takes a while to install, usually around 30 minutes, once the installation is done you can login into the horizon dashboard http://&lt;IP&gt;/dashboard. If you come across any issues check the workarounds.  Steps for deploying RDO with automatic configuration of NetApp Cinder Backend Automatic configuration allows us to generate an answers file that we can then customize. The advantage is that we are able to do some of the configuration during installation and in case we ever need to repeat the installation we have a blueprint. Using the answers file is the recommended way to install RDO. In this case we will configure Cinder to use NetApp storage backend through RDO packstack installer. packstack --gen-answer-file=~/packstack-answer.txt [code language=&quot;text&quot;] CONFIG_CINDER_BACKEND=netapp CONFIG_CINDER_NETAPP_STORAGE_FAMILY=ontap_cluster CONFIG_CINDER_NETAPP_STORAGE_PROTOCOL=nfs CONFIG_CINDER_NETAPP_VSERVER=&lt;storage virtual machine&gt; CONFIG_CINDER_NETAPP_HOSTNAME=&lt;cluster mgmt vserver&gt; CONFIG_CINDER_NETAPP_SERVER_PORT=80 CONFIG_CINDER_NETAPP_LOGIN=&lt;username&gt; CONFIG_CINDER_NETAPP_PASSWORD=&lt;password&gt; CONFIG_CINDER_NETAPP_NFS_SHARES_CONFIG=/etc/cinder/cdotNfs_exports.conf CONFIG_CINDER_NETAPP_COPYOFFLOAD_TOOL_PATH=/usr/bin/na_copyoffload_64 [/code] Note: before proceeding with the next step you need to make sure you have defined NFS exports in the /etc/cinder/cdotNfs_exports.conf and configured NetApp storage. These steps are explained in part II and part III of this series. packstack --answer-file=~/packstack-answer.txt For more information check the detailed guide on using packstack to install Cinder with NetApp storage backends. Authenticating to OpenStack environment After installation completes two tenants are created: admin and demo. Keystone will create two files under /root which provide credentials for both tenants.   cat /root/keystonerc_admin   [code language=&quot;text&quot;] export OS_USERNAME=admin export OS_TENANT_NAME=admin export OS_PASSWORD=d96c4ad2c6aa55af export OS_AUTH_URL=http://&lt;IP&gt;:5000/v2.0/ export PS1=&#39;[\u@\h \W(keystone_admin)]\$ &#39; [/code] You can use the admin user and password in the keystone source file to authenticate to Horizon or the OpenStack CLI. Create Private Network By default RDO will create a public network but for creating instances we need to use a private network. Since we would eventually like to connect instances to NetApp storage this network should be an internal private network that can reach our NetApp Storage Virtual Machines (SVMs). In my environment I used the same network for instances and SVM.  Under project-&gt;network-&gt;networks select the &quot;Create Network&quot; option to start the wizard Enter a name for network, I suggest private Add CIDR for network   &nbsp;  Add IP pool to be used for DHCP   Once our private network exists we are ready for instance creation Launch Instance At this point RDO has configured KVM as the hypervisor, installed OpenStack and configured OpenStack services. In order to verify things are working the best thing to do is to provision an instance. RDO configures one image called &quot;cirros&quot; and we can use this to test our installation.  In the Horizon dashboard under project-&gt;compute-&gt;instances select the &quot;Launch Instance&quot; button Give instance a name, select &quot;boot from image&quot; as boot source and select the &quot;cirros&quot; image    Select the &quot;networking&quot; tab and add the private network   &nbsp;  Launch the instance  The instance should start and be running shortly. This tests that the main core functionality between Nova (compute), Glance (images service) and Cinder (block storage). If things are working we are ready to configure NetApp storage for our OpenStack environment. Troubleshooting There are a few things I have run into and if you are having problems you should check them.  Disable &quot;SE Linux&quot;, I have seen issues with &quot;SE Linux&quot; and OpenStack  setenforce 0 To make change permanent edit /etc/selinux/config   Check hostname resolution  make sure hostname can be resolved if dns is not configured check /etc/hosts and /etc/sysconfig/network   Check networking make sure you can ping out to the private networks and management networks If you are having network issues, temporarily shutdown firewall and iptables until you have things working and then turn them back on Check to make sure your hardware supports virtualization  Intel: grep --color vmx /proc/cpuinfo AMD: grep --color svm /proc/cpuinfo   Check the Nova, Glance and Cinder logs  /var/log/nova /var/log/glance /var/log/cinder    The next post in the series will take a look at how to configure the NetApp storage system for OpenStack environments. (c) 2014 Keith Tenzer">





  <meta name="twitter:site" content="@keithtenzer">
  <meta name="twitter:title" content="Building Storage Services in OpenStack on NetApp - Part I of III">
  <meta name="twitter:description" content="Welcome to part one of the three-part series on creating storage services in OpenStack on NetApp. In this post we will give a brief overview of OpenStack, discuss distribution options and setup a OpenStack environment using Red Hat RDO. In part two of this series we will look at how to configure NetApp storage for OpenStack environments. In part three we will create storage services in OpenStack built on NetApp storage.  Building Storage Services in OpenStack on NetApp - Part II of III Building Storage Services in OpenStack on NetApp - Part III of III  Overview OpenStack is an interrelated set of software components that enable you to build, manage and provision private or public cloud computing platforms. OpenStack pools compute, storage and networking resources together and allows virtual machines or other instances to be deployed using those resources on the fly enabling horizontal scaling.  OpenStack Projects Each OpenStack software component is considered its own project or program. It has its own development team, resources and project schedule. There are two important OpenStack project types:  Core projects - official projects with full access to OpenStack brand and assets Incubation projects - projects on an official track to become core projects with partial access to OpenStack branding and assets  The core projects for OpenStack are as follows:  Nova (compute) Cinder (block storage) Swift (object storage) Glance (images service) Keystone (identity and authentication) Horizon (dashboard and UI) Neutron (networking) Ceilometer (telemetry and stats) Heat (orchestration) Trove (database services) Sahara (data processing) Ironic (bare metal) Zaqar (queue services) Barbican (key management services) Designate (DNS services) Oslo (common libraries) TripleO (deployment)  Incubation projects such as Manilla which offers shared file services to OpenStack are very interesting to follow, however for deployments we should focus on the official core projects. OpenStack Distributions There is a lot of variation with OpenStack since it is a culmination of interrelated projects that form a cloud computing platform. You can certainly do your own custom deployment and just install the projects you need and define your own distribution however I would not recommend this, especially for production environments. The purpose of a distribution is to leverage the vendors expertise, wrap projects or dependencies together and give you a platform which can be supported. There are of course a plethora of distributions to choose from, even distribution methods. If you are interested in reviewing the distributions and support options visit the OpenStack marketplace. I would recommend choosing a distribution which supports the dependencies and someone who has a lot of experience as well as success in providing support for open source software. In addition to the supported distributions there is a very interesting option from Red Hat called RDO. The concept is very similar to what Red Hat does in regards to Fedora actually. RDO allows you to run either Fedora, Red Hat Enterprise Linux (RHEL) or CentOS and combines those platforms with the most current release of OpenStack. Deploying OpenStack using RDO The first step to building a cloud computing platform is a proof of concept. Moving your infrastructure to a cloud computing platform changes everything, including your business processes. It is definitely not something that happens over night. RDO is the perfect thing to use to standup a OpenStack environment using production Linux with production OpenStack software releases. Red Hat does not offer commercial support for RDO so once a decision is made to deploy a production OpenStack environment you will most likely want to use a distribution from the OpenStack marketplace. One can deploy RDO with either a manual or automatic configuration, we will discuss both. Steps for deploying RDO with manual configuration  Install Fedora 20 on bare metal  Note: I have tested Fedora 20 running on ESXi 5.5, just make sure you have virtual machine hardware version 10 (required for nested virtualization support)   Configure networking so that you have outbound access to the Internet Update current packages  sudo yum update -y  Setup RDO repositories  sudo yum install -y https://rdo.fedorapeople.org/rdo-release.rpm  Install packstack installer  sudo yum install -y openstack-packstack  Run packstack to install OpenStack  packstack --allinone   OpenStack takes a while to install, usually around 30 minutes, once the installation is done you can login into the horizon dashboard http://&lt;IP&gt;/dashboard. If you come across any issues check the workarounds.  Steps for deploying RDO with automatic configuration of NetApp Cinder Backend Automatic configuration allows us to generate an answers file that we can then customize. The advantage is that we are able to do some of the configuration during installation and in case we ever need to repeat the installation we have a blueprint. Using the answers file is the recommended way to install RDO. In this case we will configure Cinder to use NetApp storage backend through RDO packstack installer. packstack --gen-answer-file=~/packstack-answer.txt [code language=&quot;text&quot;] CONFIG_CINDER_BACKEND=netapp CONFIG_CINDER_NETAPP_STORAGE_FAMILY=ontap_cluster CONFIG_CINDER_NETAPP_STORAGE_PROTOCOL=nfs CONFIG_CINDER_NETAPP_VSERVER=&lt;storage virtual machine&gt; CONFIG_CINDER_NETAPP_HOSTNAME=&lt;cluster mgmt vserver&gt; CONFIG_CINDER_NETAPP_SERVER_PORT=80 CONFIG_CINDER_NETAPP_LOGIN=&lt;username&gt; CONFIG_CINDER_NETAPP_PASSWORD=&lt;password&gt; CONFIG_CINDER_NETAPP_NFS_SHARES_CONFIG=/etc/cinder/cdotNfs_exports.conf CONFIG_CINDER_NETAPP_COPYOFFLOAD_TOOL_PATH=/usr/bin/na_copyoffload_64 [/code] Note: before proceeding with the next step you need to make sure you have defined NFS exports in the /etc/cinder/cdotNfs_exports.conf and configured NetApp storage. These steps are explained in part II and part III of this series. packstack --answer-file=~/packstack-answer.txt For more information check the detailed guide on using packstack to install Cinder with NetApp storage backends. Authenticating to OpenStack environment After installation completes two tenants are created: admin and demo. Keystone will create two files under /root which provide credentials for both tenants.   cat /root/keystonerc_admin   [code language=&quot;text&quot;] export OS_USERNAME=admin export OS_TENANT_NAME=admin export OS_PASSWORD=d96c4ad2c6aa55af export OS_AUTH_URL=http://&lt;IP&gt;:5000/v2.0/ export PS1=&#39;[\u@\h \W(keystone_admin)]\$ &#39; [/code] You can use the admin user and password in the keystone source file to authenticate to Horizon or the OpenStack CLI. Create Private Network By default RDO will create a public network but for creating instances we need to use a private network. Since we would eventually like to connect instances to NetApp storage this network should be an internal private network that can reach our NetApp Storage Virtual Machines (SVMs). In my environment I used the same network for instances and SVM.  Under project-&gt;network-&gt;networks select the &quot;Create Network&quot; option to start the wizard Enter a name for network, I suggest private Add CIDR for network   &nbsp;  Add IP pool to be used for DHCP   Once our private network exists we are ready for instance creation Launch Instance At this point RDO has configured KVM as the hypervisor, installed OpenStack and configured OpenStack services. In order to verify things are working the best thing to do is to provision an instance. RDO configures one image called &quot;cirros&quot; and we can use this to test our installation.  In the Horizon dashboard under project-&gt;compute-&gt;instances select the &quot;Launch Instance&quot; button Give instance a name, select &quot;boot from image&quot; as boot source and select the &quot;cirros&quot; image    Select the &quot;networking&quot; tab and add the private network   &nbsp;  Launch the instance  The instance should start and be running shortly. This tests that the main core functionality between Nova (compute), Glance (images service) and Cinder (block storage). If things are working we are ready to configure NetApp storage for our OpenStack environment. Troubleshooting There are a few things I have run into and if you are having problems you should check them.  Disable &quot;SE Linux&quot;, I have seen issues with &quot;SE Linux&quot; and OpenStack  setenforce 0 To make change permanent edit /etc/selinux/config   Check hostname resolution  make sure hostname can be resolved if dns is not configured check /etc/hosts and /etc/sysconfig/network   Check networking make sure you can ping out to the private networks and management networks If you are having network issues, temporarily shutdown firewall and iptables until you have things working and then turn them back on Check to make sure your hardware supports virtualization  Intel: grep --color vmx /proc/cpuinfo AMD: grep --color svm /proc/cpuinfo   Check the Nova, Glance and Cinder logs  /var/log/nova /var/log/glance /var/log/cinder    The next post in the series will take a look at how to configure the NetApp storage system for OpenStack environments. (c) 2014 Keith Tenzer">
  <meta name="twitter:url" content="https://keithtenzer.com/openstack/creating-storage-services-in-openstack-on-netapp-part-i-of-iii/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2014-12-05T00:00:00-08:00">





  

  


<link rel="canonical" href="https://keithtenzer.com/openstack/creating-storage-services-in-openstack-on-netapp-part-i-of-iii/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Keith Tenzer",
      "url": "https://keithtenzer.com/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Keith Tenzer's Blog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Keith Tenzer's Blog
          <span class="site-subtitle">Cloud Computing and Code</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/index.html">About</a>
            </li><li class="masthead__menu-item">
              <a href="/conferences-and-events/index.html">Conferences and Events</a>
            </li><li class="masthead__menu-item">
              <a href="/videos/index.html">Videos</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://keithtenzer.com/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#openstack" itemprop="item"><span itemprop="name">Openstack</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Building Storage Services in OpenStack on NetApp - Part I of III</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/main/me.png" alt="Keith Tenzer" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Keith Tenzer</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Principal Solutions Architect at Red Hat</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Los Angeles, CA</span>
        </li>
      

      
        
          
        
          
        
          
            <li><a href="https://twitter.com/keithtenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
        
          
            <li><a href="https://github.com/ktenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Building Storage Services in OpenStack on NetApp - Part I of III">
    <meta itemprop="description" content="Welcome to part one of the three-part series on creating storage services in OpenStack on NetApp. In this post we will give a brief overview of OpenStack, discuss distribution options and setup a OpenStack environment using Red Hat RDO. In part two of this series we will look at how to configure NetApp storage for OpenStack environments. In part three we will create storage services in OpenStack built on NetApp storage.Building Storage Services in OpenStack on NetApp - Part II of IIIBuilding Storage Services in OpenStack on NetApp - Part III of IIIOverviewOpenStack is an interrelated set of software components that enable you to build, manage and provision private or public cloud computing platforms. OpenStack pools compute, storage and networking resources together and allows virtual machines or other instances to be deployed using those resources on the fly enabling horizontal scaling.OpenStack ProjectsEach OpenStack software component is considered its own project or program. It has its own development team, resources and project schedule.There are two important OpenStack project types:Core projects - official projects with full access to OpenStack brand and assetsIncubation projects - projects on an official track to become core projects with partial access to OpenStack branding and assetsThe core projects for OpenStack are as follows:Nova (compute)Cinder (block storage)Swift (object storage)Glance (images service)Keystone (identity and authentication)Horizon (dashboard and UI)Neutron (networking)Ceilometer (telemetry and stats)Heat (orchestration)Trove (database services)Sahara (data processing)Ironic (bare metal)Zaqar (queue services)Barbican (key management services)Designate (DNS services)Oslo (common libraries)TripleO (deployment)Incubation projects such as Manilla which offers shared file services to OpenStack are very interesting to follow, however for deployments we should focus on the official core projects.OpenStack DistributionsThere is a lot of variation with OpenStack since it is a culmination of interrelated projects that form a cloud computing platform. You can certainly do your own custom deployment and just install the projects you need and define your own distribution however I would not recommend this, especially for production environments. The purpose of a distribution is to leverage the vendors expertise, wrap projects or dependencies together and give you a platform which can be supported. There are of course a plethora of distributions to choose from, even distribution methods. If you are interested in reviewing the distributions and support options visit the OpenStack marketplace. I would recommend choosing a distribution which supports the dependencies and someone who has a lot of experience as well as success in providing support for open source software.In addition to the supported distributions there is a very interesting option from Red Hat called RDO. The concept is very similar to what Red Hat does in regards to Fedora actually. RDO allows you to run either Fedora, Red Hat Enterprise Linux (RHEL) or CentOS and combines those platforms with the most current release of OpenStack.Deploying OpenStack using RDOThe first step to building a cloud computing platform is a proof of concept. Moving your infrastructure to a cloud computing platform changes everything, including your business processes. It is definitely not something that happens over night. RDO is the perfect thing to use to standup a OpenStack environment using production Linux with production OpenStack software releases. Red Hat does not offer commercial support for RDO so once a decision is made to deploy a production OpenStack environment you will most likely want to use a distribution from the OpenStack marketplace. One can deploy RDO with either a manual or automatic configuration, we will discuss both.Steps for deploying RDO with manual configurationInstall Fedora 20 on bare metalNote: I have tested Fedora 20 running on ESXi 5.5, just make sure you have virtual machine hardware version 10 (required for nested virtualization support)Configure networking so that you have outbound access to the InternetUpdate current packagessudo yum update -ySetup RDO repositoriessudo yum install -y https://rdo.fedorapeople.org/rdo-release.rpmInstall packstack installersudo yum install -y openstack-packstackRun packstack to install OpenStackpackstack --allinoneOpenStack takes a while to install, usually around 30 minutes, once the installation is done you can login into the horizon dashboard http://&lt;IP&gt;/dashboard. If you come across any issues check the workarounds.Steps for deploying RDO with automatic configuration of NetApp Cinder BackendAutomatic configuration allows us to generate an answers file that we can then customize. The advantage is that we are able to do some of the configuration during installation and in case we ever need to repeat the installation we have a blueprint. Using the answers file is the recommended way to install RDO. In this case we will configure Cinder to use NetApp storage backend through RDO packstack installer.packstack --gen-answer-file=~/packstack-answer.txt[code language=&quot;text&quot;]CONFIG_CINDER_BACKEND=netappCONFIG_CINDER_NETAPP_STORAGE_FAMILY=ontap_clusterCONFIG_CINDER_NETAPP_STORAGE_PROTOCOL=nfsCONFIG_CINDER_NETAPP_VSERVER=&lt;storage virtual machine&gt;CONFIG_CINDER_NETAPP_HOSTNAME=&lt;cluster mgmt vserver&gt;CONFIG_CINDER_NETAPP_SERVER_PORT=80CONFIG_CINDER_NETAPP_LOGIN=&lt;username&gt;CONFIG_CINDER_NETAPP_PASSWORD=&lt;password&gt;CONFIG_CINDER_NETAPP_NFS_SHARES_CONFIG=/etc/cinder/cdotNfs_exports.confCONFIG_CINDER_NETAPP_COPYOFFLOAD_TOOL_PATH=/usr/bin/na_copyoffload_64[/code]Note: before proceeding with the next step you need to make sure you have defined NFS exports in the /etc/cinder/cdotNfs_exports.conf and configured NetApp storage. These steps are explained in part II and part III of this series.packstack --answer-file=~/packstack-answer.txtFor more information check the detailed guide on using packstack to install Cinder with NetApp storage backends.Authenticating to OpenStack environmentAfter installation completes two tenants are created: admin and demo. Keystone will create two files under /root which provide credentials for both tenants.cat /root/keystonerc_admin[code language=&quot;text&quot;]export OS_USERNAME=adminexport OS_TENANT_NAME=adminexport OS_PASSWORD=d96c4ad2c6aa55afexport OS_AUTH_URL=http://&lt;IP&gt;:5000/v2.0/export PS1=&#39;[\u@\h \W(keystone_admin)]\$ &#39;[/code]You can use the admin user and password in the keystone source file to authenticate to Horizon or the OpenStack CLI.Create Private NetworkBy default RDO will create a public network but for creating instances we need to use a private network. Since we would eventually like to connect instances to NetApp storage this network should be an internal private network that can reach our NetApp Storage Virtual Machines (SVMs). In my environment I used the same network for instances and SVM.Under project-&gt;network-&gt;networks select the &quot;Create Network&quot; option to start the wizardEnter a name for network, I suggest privateAdd CIDR for network&nbsp;Add IP pool to be used for DHCPOnce our private network exists we are ready for instance creationLaunch InstanceAt this point RDO has configured KVM as the hypervisor, installed OpenStack and configured OpenStack services. In order to verify things are working the best thing to do is to provision an instance. RDO configures one image called &quot;cirros&quot; and we can use this to test our installation.In the Horizon dashboard under project-&gt;compute-&gt;instances select the &quot;Launch Instance&quot; buttonGive instance a name, select &quot;boot from image&quot; as boot source and select the &quot;cirros&quot; imageSelect the &quot;networking&quot; tab and add the private network&nbsp;Launch the instanceThe instance should start and be running shortly. This tests that the main core functionality between Nova (compute), Glance (images service) and Cinder (block storage). If things are working we are ready to configure NetApp storage for our OpenStack environment.TroubleshootingThere are a few things I have run into and if you are having problems you should check them.Disable &quot;SE Linux&quot;, I have seen issues with &quot;SE Linux&quot; and OpenStacksetenforce 0To make change permanent edit /etc/selinux/configCheck hostname resolutionmake sure hostname can be resolvedif dns is not configured check /etc/hosts and /etc/sysconfig/networkCheck networking make sure you can ping out to the private networks and management networksIf you are having network issues, temporarily shutdown firewall and iptables until you have things working and then turn them back onCheck to make sure your hardware supports virtualizationIntel: grep --color vmx /proc/cpuinfoAMD: grep --color svm /proc/cpuinfoCheck the Nova, Glance and Cinder logs/var/log/nova/var/log/glance/var/log/cinderThe next post in the series will take a look at how to configure the NetApp storage system for OpenStack environments.(c) 2014 Keith Tenzer">
    <meta itemprop="datePublished" content="2014-12-05T00:00:00-08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Building Storage Services in OpenStack on NetApp - Part I of III
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2014-12-05T00:00:00-08:00">December 5, 2014</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          12 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Welcome to part one of the three-part series on creating storage services in OpenStack on NetApp. In this post we will give a brief overview of OpenStack, discuss distribution options and setup a OpenStack environment using Red Hat RDO. In part two of this series we will look at how to configure NetApp storage for OpenStack environments. In part three we will create storage services in OpenStack built on NetApp storage.<!--more--></p>
<ul>
<li><a href="http://keithtenzer.com/2014/12/09/building-storage-services-in-openstack-on-netapp-part-ii-of-iii/">Building Storage Services in OpenStack on NetApp - Part II of III</a></li>
<li><a href="http://keithtenzer.com/2014/12/10/building-storage-services-in-openstack-on-netapp-part-iii-of-iii/">Building Storage Services in OpenStack on NetApp - Part III of III</a></li>
</ul>
<h3>Overview</h3>
<p>OpenStack is an interrelated set of software components that enable you to build, manage and provision private or public cloud computing platforms. OpenStack pools compute, storage and networking resources together and allows virtual machines or other instances to be deployed using those resources on the fly enabling horizontal scaling.</p>
<p><a href="https://keithtenzer.files.wordpress.com/2014/12/openstack-software-diagram-737x305.png"><img class="  wp-image-127 aligncenter" src="/assets/2014/12/openstack-software-diagram-737x305.png?w=300" alt="openstack-software-diagram-737x305" width="704" height="291" /></a></p>
<h3>OpenStack Projects</h3>
<p>Each OpenStack software component is considered its own project or program. It has its own development team, resources and project schedule.</p>
<p>There are two important OpenStack project types:</p>
<ul>
<li>Core projects - official projects with full access to OpenStack brand and assets</li>
<li>Incubation projects - projects on an official track to become core projects with partial access to OpenStack branding and assets</li>
</ul>
<p>The core projects for OpenStack are as follows:</p>
<ul>
<li>Nova (compute)</li>
<li>Cinder (block storage)</li>
<li>Swift (object storage)</li>
<li>Glance (images service)</li>
<li>Keystone (identity and authentication)</li>
<li>Horizon (dashboard and UI)</li>
<li>Neutron (networking)</li>
<li>Ceilometer (telemetry and stats)</li>
<li>Heat (orchestration)</li>
<li>Trove (database services)</li>
<li>Sahara (data processing)</li>
<li>Ironic (bare metal)</li>
<li>Zaqar (queue services)</li>
<li>Barbican (key management services)</li>
<li>Designate (DNS services)</li>
<li>Oslo (common libraries)</li>
<li>TripleO (deployment)</li>
</ul>
<p>Incubation projects such as Manilla which offers shared file services to OpenStack are very interesting to follow, however for deployments we should focus on the official core projects.</p>
<h3>OpenStack Distributions</h3>
<p>There is a lot of variation with OpenStack since it is a culmination of interrelated projects that form a cloud computing platform. You can certainly do your own custom deployment and just install the projects you need and define your own distribution however I would not recommend this, especially for production environments. The purpose of a distribution is to leverage the vendors expertise, wrap projects or dependencies together and give you a platform which can be supported. There are of course a plethora of distributions to choose from, even distribution methods. If you are interested in reviewing the distributions and support options visit the <a href="http://www.openstack.org/marketplace/distros/">OpenStack marketplace</a>. I would recommend choosing a distribution which supports the dependencies and someone who has a lot of experience as well as success in providing support for open source software.</p>
<p>In addition to the supported distributions there is a very interesting option from Red Hat called <a href="https://openstack.redhat.com/Main_Page">RDO</a>. The concept is very similar to what Red Hat does in regards to Fedora actually. RDO allows you to run either Fedora, Red Hat Enterprise Linux (RHEL) or CentOS and combines those platforms with the most current release of OpenStack.</p>
<h3>Deploying OpenStack using RDO</h3>
<p>The first step to building a cloud computing platform is a proof of concept. Moving your infrastructure to a cloud computing platform changes everything, including your business processes. It is definitely not something that happens over night. RDO is the perfect thing to use to standup a OpenStack environment using production Linux with production OpenStack software releases. Red Hat does not offer commercial support for RDO so once a decision is made to deploy a production OpenStack environment you will most likely want to use a distribution from the OpenStack marketplace. One can deploy RDO with either a manual or automatic configuration, we will discuss both.</p>
<h4>Steps for deploying RDO with manual configuration</h4>
<ul>
<li>Install Fedora 20 on bare metal
<ul>
<li>Note: I have tested Fedora 20 running on ESXi 5.5, just make sure you have virtual machine hardware version 10 (required for nested virtualization support)</li>
</ul>
</li>
<li>Configure networking so that you have outbound access to the Internet</li>
<li>Update current packages</li>
<li>
<pre>sudo yum update -y</pre>
</li>
<li>Setup RDO repositories</li>
<li>
<pre>sudo yum install -y https://rdo.fedorapeople.org/rdo-release.rpm</pre>
</li>
<li>Install packstack installer</li>
<li>
<pre>sudo yum install -y openstack-packstack</pre>
</li>
<li>Run packstack to install OpenStack</li>
<li>
<pre>packstack --allinone</pre>
</li>
</ul>
<p>OpenStack takes a while to install, usually around 30 minutes, once the installation is done you can login into the horizon dashboard <a class="external free" href="http://%24yourip/dashboard" rel="nofollow">http://&lt;IP&gt;/dashboard</a>. If you come across any issues check the <a href="https://openstack.redhat.com/Workarounds">workarounds</a>.</p>
<h5></h5>
<h4>Steps for deploying RDO with automatic configuration of NetApp Cinder Backend</h4>
<p>Automatic configuration allows us to generate an answers file that we can then customize. The advantage is that we are able to do some of the configuration during installation and in case we ever need to repeat the installation we have a blueprint. Using the answers file is the recommended way to install RDO. In this case we will configure Cinder to use NetApp storage backend through RDO packstack installer.</p>
<pre><code>packstack --gen-answer-file=~/packstack-answer.txt</code></pre>
<p>[code language="text"]</p>
<p>CONFIG_CINDER_BACKEND=netapp</p>
<p>CONFIG_CINDER_NETAPP_STORAGE_FAMILY=ontap_cluster</p>
<p>CONFIG_CINDER_NETAPP_STORAGE_PROTOCOL=nfs</p>
<p>CONFIG_CINDER_NETAPP_VSERVER=&lt;storage virtual machine&gt;</p>
<p>CONFIG_CINDER_NETAPP_HOSTNAME=&lt;cluster mgmt vserver&gt;</p>
<p>CONFIG_CINDER_NETAPP_SERVER_PORT=80</p>
<p>CONFIG_CINDER_NETAPP_LOGIN=&lt;username&gt;</p>
<p>CONFIG_CINDER_NETAPP_PASSWORD=&lt;password&gt;</p>
<p>CONFIG_CINDER_NETAPP_NFS_SHARES_CONFIG=/etc/cinder/cdotNfs_exports.conf</p>
<p>CONFIG_CINDER_NETAPP_COPYOFFLOAD_TOOL_PATH=/usr/bin/na_copyoffload_64</p>
<p>[/code]</p>
<p>Note: before proceeding with the next step you need to make sure you have defined NFS exports in the /etc/cinder/cdotNfs_exports.conf and configured NetApp storage. These steps are explained in <a href="http://keithtenzer.com/2014/12/09/building-storage-services-in-openstack-on-netapp-part-ii-of-iii/">part II</a> and <a href="http://keithtenzer.com/2014/12/10/building-storage-services-in-openstack-on-netapp-part-iii-of-iii/">part III</a> of this series.</p>
<pre><code>packstack --answer-file=~/packstack-answer.txt</code></pre>
<p>For more information check the detailed guide on <a href="http://netapp.github.io/openstack/2014/12/06/packstack-cinder/index.html">using packstack to install Cinder with NetApp storage backends</a>.</p>
<h4>Authenticating to OpenStack environment</h4>
<p>After installation completes two tenants are created: admin and demo. Keystone will create two files under /root which provide credentials for both tenants.</p>
<ul>
<li>
<pre>cat /root/keystonerc_admin</pre>
</li>
</ul>
<p>[code language="text"]</p>
<p>export OS_USERNAME=admin<br />
export OS_TENANT_NAME=admin<br />
export OS_PASSWORD=d96c4ad2c6aa55af<br />
export OS_AUTH_URL=http://&lt;IP&gt;:5000/v2.0/<br />
export PS1='[\u@\h \W(keystone_admin)]\$ '</p>
<p>[/code]</p>
<p>You can use the admin user and password in the keystone source file to authenticate to Horizon or the OpenStack CLI.</p>
<h4>Create Private Network</h4>
<p>By default RDO will create a public network but for creating instances we need to use a private network. Since we would eventually like to connect instances to NetApp storage this network should be an internal private network that can reach our NetApp Storage Virtual Machines (SVMs). In my environment I used the same network for instances and SVM.</p>
<ul>
<li>Under project-&gt;network-&gt;networks select the "Create Network" option to start the wizard</li>
<li>Enter a name for network, I suggest private</li>
<li>Add CIDR for network</li>
</ul>
<p><a href="https://keithtenzer.files.wordpress.com/2014/12/screen-shot-2014-12-04-at-14-27-52.png"><img class="  wp-image-132 aligncenter" src="/assets/2014/12/screen-shot-2014-12-04-at-14-27-52.png?w=300" alt="Screen Shot 2014-12-04 at 14.27.52" width="700" height="572" /></a></p>
<p>&nbsp;</p>
<ul>
<li>Add IP pool to be used for DHCP</li>
</ul>
<p><a href="https://keithtenzer.files.wordpress.com/2014/12/screen-shot-2014-12-04-at-14-34-59.png"><img class="  wp-image-134 aligncenter" src="/assets/2014/12/screen-shot-2014-12-04-at-14-34-59.png?w=300" alt="Screen Shot 2014-12-04 at 14.34.59" width="706" height="506" /></a></p>
<p>Once our private network exists we are ready for instance creation</p>
<h4>Launch Instance</h4>
<p>At this point RDO has configured KVM as the hypervisor, installed OpenStack and configured OpenStack services. In order to verify things are working the best thing to do is to provision an instance. RDO configures one image called "cirros" and we can use this to test our installation.</p>
<ul>
<li>In the Horizon dashboard under project-&gt;compute-&gt;instances select the "Launch Instance" button</li>
<li>Give instance a name, select "boot from image" as boot source and select the "cirros" image</li>
</ul>
<p><a href="https://keithtenzer.files.wordpress.com/2014/12/screen-shot-2014-12-04-at-14-23-01.png"><img class="  wp-image-135 aligncenter" src="/assets/2014/12/screen-shot-2014-12-04-at-14-23-01.png?w=300" alt="Screen Shot 2014-12-04 at 14.23.01" width="704" height="636" /></a></p>
<ul>
<li>Select the "networking" tab and add the private network</li>
</ul>
<p><a href="https://keithtenzer.files.wordpress.com/2014/12/screen-shot-2014-12-04-at-14-51-54.png"><img class="  wp-image-137 aligncenter" src="/assets/2014/12/screen-shot-2014-12-04-at-14-51-54.png?w=300" alt="Screen Shot 2014-12-04 at 14.51.54" width="697" height="353" /></a></p>
<p>&nbsp;</p>
<ul>
<li>Launch the instance</li>
</ul>
<p>The instance should start and be running shortly. This tests that the main core functionality between Nova (compute), Glance (images service) and Cinder (block storage). If things are working we are ready to configure NetApp storage for our OpenStack environment.</p>
<h3>Troubleshooting</h3>
<p>There are a few things I have run into and if you are having problems you should check them.</p>
<ul>
<li>Disable "SE Linux", I have seen issues with "SE Linux" and OpenStack
<ul>
<li>setenforce 0</li>
<li>To make change permanent edit /etc/selinux/config</li>
</ul>
</li>
<li>Check hostname resolution
<ul>
<li>make sure hostname can be resolved</li>
<li>if dns is not configured check /etc/hosts and /etc/sysconfig/network</li>
</ul>
</li>
<li>Check networking make sure you can ping out to the private networks and management networks</li>
<li>If you are having network issues, temporarily shutdown firewall and iptables until you have things working and then turn them back on</li>
<li>Check to make sure your hardware supports virtualization
<ul>
<li>Intel: grep --color vmx /proc/cpuinfo</li>
<li>AMD: grep --color svm /proc/cpuinfo</li>
</ul>
</li>
<li>Check the Nova, Glance and Cinder logs
<ul>
<li>/var/log/nova</li>
<li>/var/log/glance</li>
<li>/var/log/cinder</li>
</ul>
</li>
</ul>
<p>The next post in the series will take a look at how to configure the NetApp storage system for OpenStack environments.</p>
<p>(c) 2014 Keith Tenzer</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#cloud" class="page__taxonomy-item" rel="tag">Cloud</a><span class="sep">, </span>
    
      <a href="/tags/#clustered-data-ontap" class="page__taxonomy-item" rel="tag">Clustered Data ONTAP</a><span class="sep">, </span>
    
      <a href="/tags/#netapp" class="page__taxonomy-item" rel="tag">NetApp</a><span class="sep">, </span>
    
      <a href="/tags/#openstack" class="page__taxonomy-item" rel="tag">OpenStack</a><span class="sep">, </span>
    
      <a href="/tags/#red-hat-rdo" class="page__taxonomy-item" rel="tag">Red Hat RDO</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#openstack" class="page__taxonomy-item" rel="tag">OpenStack</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2014-12-05T00:00:00-08:00">December 5, 2014</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=keithtenzer&text=Building+Storage+Services+in+OpenStack+on+NetApp+-+Part+I+of+III%20https%3A%2F%2Fkeithtenzer.com%2Fopenstack%2Fcreating-storage-services-in-openstack-on-netapp-part-i-of-iii%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkeithtenzer.com%2Fopenstack%2Fcreating-storage-services-in-openstack-on-netapp-part-i-of-iii%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fkeithtenzer.com%2Fopenstack%2Fcreating-storage-services-in-openstack-on-netapp-part-i-of-iii%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/general/the-meaning-of-midnight-code-junkie/" class="pagination--pager" title="The meaning of “midnight code junkie”
">Previous</a>
    
    
      <a href="/openstack/building-storage-services-in-openstack-on-netapp-part-ii-of-iii/" class="pagination--pager" title="Building Storage Services in OpenStack on NetApp - Part II of III
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/openshift/openshift-service-mesh-getting-started-guide/" rel="permalink">OpenShift Service Mesh Getting Started Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-04-27T00:00:00-07:00">April 27, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">






Overview
In this article we will explore the OpenShift Service Mesh and deploy a demo application to better understand the various concepts. First you...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/openshift/openshift-4-aws-ipi-installation-getting-started-guide/" rel="permalink">OpenShift 4 AWS IPI Installation Getting Started Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-01-18T00:00:00-08:00">January 18, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">


Happy new year as this will be the first post of 2021! 2020 was obviously a challenging year, my hope is I will have more time to devote to blogging in 20...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ansible/windows-automation-with-ansible-getting-started-guide/" rel="permalink">Windows Automation with Ansible: Getting Started Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2020-05-19T00:00:00-07:00">May 19, 2020</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          14 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
Overview
In this article we will focus on how to get started with automation of windows using Ansible. Specifically we will look at installing 3rd party sof...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/general/red-hat-subscription-reporting-guide/" rel="permalink">Red Hat Subscription Reporting Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2020-05-13T00:00:00-07:00">May 13, 2020</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
source: https://www.cio.com/article/3199910/zuora-blazes-a-new-trail-to-the-subscription-economy-and-a-post-erp-world.html
Overview
This article will look a...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/keithtenzer"" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/ktenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Keith Tenzer. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
