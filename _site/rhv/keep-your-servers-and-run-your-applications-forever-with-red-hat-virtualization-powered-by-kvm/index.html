<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Keep Your Servers and Run Your Applications Forever with Red Hat Virtualization powered by KVM - KEITHTENZER.COM</title>
<meta name="description" content="Overview This article was written by myself and fellow colleague Götz Rieger. Often one of the most challenging problems we are facing today is both absorbing and leading change. Software defined-everything has taken over and is leveling the playing field, de-marginalizing staunch competitive advantages and nothing is safe anymore. Develop great applications and thrive or become irrelevant is the mantra facing many organizations. In such environments it is important to innovate constantly, delivering new capabilities at an ever increasing speed. In order to do so, new practices (DevOps), values (Agile) and of course technology (Containers) are being implemented.  Today it seems almost everyone is focused on &quot;the new&quot; software-defined whatever, when in reality change happens at different levels and different speeds. Gartner tried to summarize this with &quot;mode 1 vs mode 2&quot; but that trivializes things too far. It comes down to application lifecycles which dictates dependency on change.  What if certain software doesn&#39;t need to change? What if it has a purpose and is already doing it&#39;s job function? What if the software cannot be ported to a new operating platform? What do you do then? The answer surprisingly, is maybe nothing? Maybe we let those applications live well beyond their intended support lifecycles. Consider the old programs in the Matrix, some found a way to survive and were not killed. These were also some of the most important, powerful programs.  Virtualization has enabled us to let x86 platforms essentially run forever or at least well beyond their support lifecycles (hardware and software). If we consider outdated Cobol applications on UNIX or Windows platforms like NT, XP and 2003; they haven&#39;t been supported for years. Applications running on these platforms might are not able to migrate for whatever reason, else they would have already done so. If we think about it, this is in fact a very valid use case for virtualization. There are of course other considerations that are important, like isolation (since these applications are not receiving patches) but assuming that is handled, why not? If it ain&#39;t broken and doesn&#39;t need to change, why fix it?  In this article we will look at how to run Windows NT Server (an operating system that hasn&#39;t been supported since 2004) on KVM and Red Hat Virtualization powered by KVM.   Prerequisites We found two options to work well, a VMware VM with NT already installed and patched or install NT into a qemu/KVM VM. In order to continue you will need the following:  Red Hat Virtualization (RHV) environment (Here we used RHV 4.1) KVM Windows NT installation medium (ISO) or a VMware virtual disk with pre-installed NT  WARNING: Just to be clear Windows NT is not a supported guest OS for Red Hat Virtualization (RHV). That should be obvious since it isn&#39;t supported by Microsoft either. Option 1: Installing Windows NT ISO On RHV we didn’t get the Windows NT 4.0 installer from the original boot CD to run without Blue Screening on us, so we had to take a detour. Windows NT 4.0 installs on qemu/KVM using virt-manager (RHEL 7.3 in this case). After installation, NT can be patched up to SP6 (which runs fine on RHV) and then the VM can be migrated to RHV. Remember in those days you couldn’t easily build a slip-stream CD with the updates integrated anyway. In order to install Windows NT you will need the original installation CD as  ISO image, Service Pack 6 and the Realtek RTL8139 network driver for NT. Of course it goes without saying, you should use a purchased copy of Windows NT.  Convert Windows NT SP 6 to ISO # mkisofs -o iso winntsp6.iso Convert Realtek Driver to ISO # mkisofs -o iso rtl8139.iso Create Windows NT Virtual Machine in KVM Provide the Windows NT Server ISO and configure the Virtual Machine using virt-manager. Set CPU Model to Pentium Windows NT (without SP6) can only boot on older CPU generations like Pentium.  Set Virtual Disk to IDE Windows NT does not have a virtio driver so we need to use IDE interface.  Set Network to RTL8139 Windows NT has drivers for Realtek 8139.  Configure Windows NT Server  Format Partition as NTFS  Select defaults other than NTFS for the partition.  Reboot Before rebooting change the boot order in virtual machine so that it boots from disk and not cdrom.  Windows NT Setup Enter license and otherwise select defaults and server role (DC or standalone).  Install Realtek 8139 Driver Mount the rtl8139.iso in the cdrom that was created above and install driver. Configure IP, Subnet, Gateway and DNS.  Login to Windows NT Server  Install Windows NT Server SP 6 Using ISO created above, mount the Windows NT SP6 ISO and run the installer. Note: A lesson learned back in the day: If you install the network card driver (or anything else for that matter) after Service Pack installation, just re-install the SP afterwards. This takes care of the dreaded “a service couldn’t be started” error.   Test Networking Ensure network stack is functional.  Congratulations!!! You just installed plus booted, an Operating System that has been off support since 2004 (over 10 years) and would most definitely not run on any modern hardware that exists today. Option 2: Importing from VMware Red Hat provides a tool called virt-v2v for converting from VMware or other virtualization platforms to RHV and KVM. Unfortunately in this case, Windows NT is simply too old and virt-v2v cannot recognize the operating system. Thankfully however the qemu-img command can easily convert a vmdk to qcow2. Convert VMDK to QCOW2 # qemu-img convert -f vmdk -O qcow2 winnt_server.vmdk winnt_server.qcow2 Once the image is converted you can import into KVM or RHV. Note: you need to remember to set CPU: Pentium, Virtual Disk Interface: IDE and NIC: RTL8139 after importing and before starting virtual machine. Importing Windows NT Server in RHV Now that we have a working Windows NT Server 4 SP6 qcow2 image it is time to import into Red Hat Virtualization (RHV). There are several options but we will explore two.  Importing into RHV directly from KVM (Libvirt) Importing using a script from Richard Jones (Colleague in Virtualization Group @Red Hat)  Option 1: Import using KVM (Libvirt) RHV has a direct integration and can import virtual machines directly from many virtualization platforms like Libvirt, VMware, Amazon EC2, etc. Configure KVM (Libvirt) to allow external connections [On KVM Host] Enable TCP connections to Libvirt Daemon #vi /etc/libvirt/libvirtd.conf listen_tls = 0 listen_tcp = 1 tcp_port = &quot;16509&quot; auth_tcp = &quot;none&quot; #vi /etc/sysconfig/libvirtd LIBVIRTD_ARGS=&quot;--listen&quot; Open Libvirt Port on Firewall firewall-cmd --permanent --add-port=&quot;16509/tcp&quot; firewall-cmd --reload Import Virtual Machine  In RHV management console under VM-&gt;Import select KVM as source. The URI should be &quot;qemu+tcp://IP/system&quot;. Once setting username and password select load to display the virtual machines running on KVM host. Select the Window NT Server virtual machine.  Choose Storage Domain Storage domains in RHV are similar to VMware datastores, this is where the virtual machines live. Here we will select a desired storage domain.  Once the import process is started you will be notified and can follow the process via the event monitor in RHV. Option 2: Import Using Script Richard Jones has created a very useful script that imports qcow2 images directly into RHV via the export domain (a special storage domain for importing templates). We really like this method for qcow2 because it doesn&#39;t try to convert the image like virt-v2v (which isn&#39;t needed) and you don’t need RHV to have direct access to another virtualization platform. The script and it&#39;s commits are stored here. In addition Richard Jones has also provided a blog on using his import script. Install the Script Select a host where you would like to install the script. The host shouldn’t be one of your RHV systems (neither RHV-H nor RHV-M). Then simply copy/paste or use curl to get the script from here. Install Dependencies # yum install perl-XML-Writer perl-Sys-Guestfs Configure Direct Image Conversion We don&#39;t want to convert image using libvirt but direct. # export LIBGUESTFS_BACKEND=direct Run Import Script The script needs to be able to access the export storage domain via NFS. Ensure the host running the export script can mount the NFS share locally and write there. Here the host providing the export domain mount is &quot;rhevh01.lab&quot; and the path is &quot;/usr/share/export&quot;. # ./import-to-ovirt.pl winnt_server.qcow2 rhevh01.lab:/usr/share/export The script will create the necessary structure and metadata and place things into the export storage domain in RHV. Import Image from Export Domain In RHV management under storage select the export storage domain. At the bottom select the tab &quot;VM Import&quot;. Here you should see the image we just imported.  Congratulations!!! You just successfully imported Windows NT Server into RHV. Confirm Settings Before starting the Windows NT virtual machine we will ensure the settings are correct and the VM is configured to present the supported hardware. Virtual Disk Set to IDE  Set CPU Model Okay, we are done and ready to start NT! No, wait a second… you might remember we said NT is only able to boot on older CPU families, we choose “Pentium” in virt-manager. Have a look at the CPU settings available for the VM in RHV, no Pentium or other archaeological  interesting CPU families to be seen. This doesn’t mean they aren’t there, underneath it’s KVM after all, but they are not exposed in the web UI. Fortunately RHV comes with a feature called “VDSM Hooks” that allows to run arbitrary scripts on VM actions and enables us to change almost every feature of a VM. Configure VDSM Plugin [On each Hypervisor (RHV-H) Host] Credit here goes to colleagues Martin Polednik and Michal Skrivanek for providing VDSM hook script. # vi /usr/libexec/vdsm/hooks/before_vm_start/50_cpufamily #!/usr/bin/python">


  <meta name="author" content="Keith Tenzer">
  
  <meta property="article:author" content="Keith Tenzer">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="KEITHTENZER.COM">
<meta property="og:title" content="Keep Your Servers and Run Your Applications Forever with Red Hat Virtualization powered by KVM">
<meta property="og:url" content="https://keithtenzer.com/rhv/keep-your-servers-and-run-your-applications-forever-with-red-hat-virtualization-powered-by-kvm/">


  <meta property="og:description" content="Overview This article was written by myself and fellow colleague Götz Rieger. Often one of the most challenging problems we are facing today is both absorbing and leading change. Software defined-everything has taken over and is leveling the playing field, de-marginalizing staunch competitive advantages and nothing is safe anymore. Develop great applications and thrive or become irrelevant is the mantra facing many organizations. In such environments it is important to innovate constantly, delivering new capabilities at an ever increasing speed. In order to do so, new practices (DevOps), values (Agile) and of course technology (Containers) are being implemented.  Today it seems almost everyone is focused on &quot;the new&quot; software-defined whatever, when in reality change happens at different levels and different speeds. Gartner tried to summarize this with &quot;mode 1 vs mode 2&quot; but that trivializes things too far. It comes down to application lifecycles which dictates dependency on change.  What if certain software doesn&#39;t need to change? What if it has a purpose and is already doing it&#39;s job function? What if the software cannot be ported to a new operating platform? What do you do then? The answer surprisingly, is maybe nothing? Maybe we let those applications live well beyond their intended support lifecycles. Consider the old programs in the Matrix, some found a way to survive and were not killed. These were also some of the most important, powerful programs.  Virtualization has enabled us to let x86 platforms essentially run forever or at least well beyond their support lifecycles (hardware and software). If we consider outdated Cobol applications on UNIX or Windows platforms like NT, XP and 2003; they haven&#39;t been supported for years. Applications running on these platforms might are not able to migrate for whatever reason, else they would have already done so. If we think about it, this is in fact a very valid use case for virtualization. There are of course other considerations that are important, like isolation (since these applications are not receiving patches) but assuming that is handled, why not? If it ain&#39;t broken and doesn&#39;t need to change, why fix it?  In this article we will look at how to run Windows NT Server (an operating system that hasn&#39;t been supported since 2004) on KVM and Red Hat Virtualization powered by KVM.   Prerequisites We found two options to work well, a VMware VM with NT already installed and patched or install NT into a qemu/KVM VM. In order to continue you will need the following:  Red Hat Virtualization (RHV) environment (Here we used RHV 4.1) KVM Windows NT installation medium (ISO) or a VMware virtual disk with pre-installed NT  WARNING: Just to be clear Windows NT is not a supported guest OS for Red Hat Virtualization (RHV). That should be obvious since it isn&#39;t supported by Microsoft either. Option 1: Installing Windows NT ISO On RHV we didn’t get the Windows NT 4.0 installer from the original boot CD to run without Blue Screening on us, so we had to take a detour. Windows NT 4.0 installs on qemu/KVM using virt-manager (RHEL 7.3 in this case). After installation, NT can be patched up to SP6 (which runs fine on RHV) and then the VM can be migrated to RHV. Remember in those days you couldn’t easily build a slip-stream CD with the updates integrated anyway. In order to install Windows NT you will need the original installation CD as  ISO image, Service Pack 6 and the Realtek RTL8139 network driver for NT. Of course it goes without saying, you should use a purchased copy of Windows NT.  Convert Windows NT SP 6 to ISO # mkisofs -o iso winntsp6.iso Convert Realtek Driver to ISO # mkisofs -o iso rtl8139.iso Create Windows NT Virtual Machine in KVM Provide the Windows NT Server ISO and configure the Virtual Machine using virt-manager. Set CPU Model to Pentium Windows NT (without SP6) can only boot on older CPU generations like Pentium.  Set Virtual Disk to IDE Windows NT does not have a virtio driver so we need to use IDE interface.  Set Network to RTL8139 Windows NT has drivers for Realtek 8139.  Configure Windows NT Server  Format Partition as NTFS  Select defaults other than NTFS for the partition.  Reboot Before rebooting change the boot order in virtual machine so that it boots from disk and not cdrom.  Windows NT Setup Enter license and otherwise select defaults and server role (DC or standalone).  Install Realtek 8139 Driver Mount the rtl8139.iso in the cdrom that was created above and install driver. Configure IP, Subnet, Gateway and DNS.  Login to Windows NT Server  Install Windows NT Server SP 6 Using ISO created above, mount the Windows NT SP6 ISO and run the installer. Note: A lesson learned back in the day: If you install the network card driver (or anything else for that matter) after Service Pack installation, just re-install the SP afterwards. This takes care of the dreaded “a service couldn’t be started” error.   Test Networking Ensure network stack is functional.  Congratulations!!! You just installed plus booted, an Operating System that has been off support since 2004 (over 10 years) and would most definitely not run on any modern hardware that exists today. Option 2: Importing from VMware Red Hat provides a tool called virt-v2v for converting from VMware or other virtualization platforms to RHV and KVM. Unfortunately in this case, Windows NT is simply too old and virt-v2v cannot recognize the operating system. Thankfully however the qemu-img command can easily convert a vmdk to qcow2. Convert VMDK to QCOW2 # qemu-img convert -f vmdk -O qcow2 winnt_server.vmdk winnt_server.qcow2 Once the image is converted you can import into KVM or RHV. Note: you need to remember to set CPU: Pentium, Virtual Disk Interface: IDE and NIC: RTL8139 after importing and before starting virtual machine. Importing Windows NT Server in RHV Now that we have a working Windows NT Server 4 SP6 qcow2 image it is time to import into Red Hat Virtualization (RHV). There are several options but we will explore two.  Importing into RHV directly from KVM (Libvirt) Importing using a script from Richard Jones (Colleague in Virtualization Group @Red Hat)  Option 1: Import using KVM (Libvirt) RHV has a direct integration and can import virtual machines directly from many virtualization platforms like Libvirt, VMware, Amazon EC2, etc. Configure KVM (Libvirt) to allow external connections [On KVM Host] Enable TCP connections to Libvirt Daemon #vi /etc/libvirt/libvirtd.conf listen_tls = 0 listen_tcp = 1 tcp_port = &quot;16509&quot; auth_tcp = &quot;none&quot; #vi /etc/sysconfig/libvirtd LIBVIRTD_ARGS=&quot;--listen&quot; Open Libvirt Port on Firewall firewall-cmd --permanent --add-port=&quot;16509/tcp&quot; firewall-cmd --reload Import Virtual Machine  In RHV management console under VM-&gt;Import select KVM as source. The URI should be &quot;qemu+tcp://IP/system&quot;. Once setting username and password select load to display the virtual machines running on KVM host. Select the Window NT Server virtual machine.  Choose Storage Domain Storage domains in RHV are similar to VMware datastores, this is where the virtual machines live. Here we will select a desired storage domain.  Once the import process is started you will be notified and can follow the process via the event monitor in RHV. Option 2: Import Using Script Richard Jones has created a very useful script that imports qcow2 images directly into RHV via the export domain (a special storage domain for importing templates). We really like this method for qcow2 because it doesn&#39;t try to convert the image like virt-v2v (which isn&#39;t needed) and you don’t need RHV to have direct access to another virtualization platform. The script and it&#39;s commits are stored here. In addition Richard Jones has also provided a blog on using his import script. Install the Script Select a host where you would like to install the script. The host shouldn’t be one of your RHV systems (neither RHV-H nor RHV-M). Then simply copy/paste or use curl to get the script from here. Install Dependencies # yum install perl-XML-Writer perl-Sys-Guestfs Configure Direct Image Conversion We don&#39;t want to convert image using libvirt but direct. # export LIBGUESTFS_BACKEND=direct Run Import Script The script needs to be able to access the export storage domain via NFS. Ensure the host running the export script can mount the NFS share locally and write there. Here the host providing the export domain mount is &quot;rhevh01.lab&quot; and the path is &quot;/usr/share/export&quot;. # ./import-to-ovirt.pl winnt_server.qcow2 rhevh01.lab:/usr/share/export The script will create the necessary structure and metadata and place things into the export storage domain in RHV. Import Image from Export Domain In RHV management under storage select the export storage domain. At the bottom select the tab &quot;VM Import&quot;. Here you should see the image we just imported.  Congratulations!!! You just successfully imported Windows NT Server into RHV. Confirm Settings Before starting the Windows NT virtual machine we will ensure the settings are correct and the VM is configured to present the supported hardware. Virtual Disk Set to IDE  Set CPU Model Okay, we are done and ready to start NT! No, wait a second… you might remember we said NT is only able to boot on older CPU families, we choose “Pentium” in virt-manager. Have a look at the CPU settings available for the VM in RHV, no Pentium or other archaeological  interesting CPU families to be seen. This doesn’t mean they aren’t there, underneath it’s KVM after all, but they are not exposed in the web UI. Fortunately RHV comes with a feature called “VDSM Hooks” that allows to run arbitrary scripts on VM actions and enables us to change almost every feature of a VM. Configure VDSM Plugin [On each Hypervisor (RHV-H) Host] Credit here goes to colleagues Martin Polednik and Michal Skrivanek for providing VDSM hook script. # vi /usr/libexec/vdsm/hooks/before_vm_start/50_cpufamily #!/usr/bin/python">





  <meta name="twitter:site" content="@keithtenzer">
  <meta name="twitter:title" content="Keep Your Servers and Run Your Applications Forever with Red Hat Virtualization powered by KVM">
  <meta name="twitter:description" content="Overview This article was written by myself and fellow colleague Götz Rieger. Often one of the most challenging problems we are facing today is both absorbing and leading change. Software defined-everything has taken over and is leveling the playing field, de-marginalizing staunch competitive advantages and nothing is safe anymore. Develop great applications and thrive or become irrelevant is the mantra facing many organizations. In such environments it is important to innovate constantly, delivering new capabilities at an ever increasing speed. In order to do so, new practices (DevOps), values (Agile) and of course technology (Containers) are being implemented.  Today it seems almost everyone is focused on &quot;the new&quot; software-defined whatever, when in reality change happens at different levels and different speeds. Gartner tried to summarize this with &quot;mode 1 vs mode 2&quot; but that trivializes things too far. It comes down to application lifecycles which dictates dependency on change.  What if certain software doesn&#39;t need to change? What if it has a purpose and is already doing it&#39;s job function? What if the software cannot be ported to a new operating platform? What do you do then? The answer surprisingly, is maybe nothing? Maybe we let those applications live well beyond their intended support lifecycles. Consider the old programs in the Matrix, some found a way to survive and were not killed. These were also some of the most important, powerful programs.  Virtualization has enabled us to let x86 platforms essentially run forever or at least well beyond their support lifecycles (hardware and software). If we consider outdated Cobol applications on UNIX or Windows platforms like NT, XP and 2003; they haven&#39;t been supported for years. Applications running on these platforms might are not able to migrate for whatever reason, else they would have already done so. If we think about it, this is in fact a very valid use case for virtualization. There are of course other considerations that are important, like isolation (since these applications are not receiving patches) but assuming that is handled, why not? If it ain&#39;t broken and doesn&#39;t need to change, why fix it?  In this article we will look at how to run Windows NT Server (an operating system that hasn&#39;t been supported since 2004) on KVM and Red Hat Virtualization powered by KVM.   Prerequisites We found two options to work well, a VMware VM with NT already installed and patched or install NT into a qemu/KVM VM. In order to continue you will need the following:  Red Hat Virtualization (RHV) environment (Here we used RHV 4.1) KVM Windows NT installation medium (ISO) or a VMware virtual disk with pre-installed NT  WARNING: Just to be clear Windows NT is not a supported guest OS for Red Hat Virtualization (RHV). That should be obvious since it isn&#39;t supported by Microsoft either. Option 1: Installing Windows NT ISO On RHV we didn’t get the Windows NT 4.0 installer from the original boot CD to run without Blue Screening on us, so we had to take a detour. Windows NT 4.0 installs on qemu/KVM using virt-manager (RHEL 7.3 in this case). After installation, NT can be patched up to SP6 (which runs fine on RHV) and then the VM can be migrated to RHV. Remember in those days you couldn’t easily build a slip-stream CD with the updates integrated anyway. In order to install Windows NT you will need the original installation CD as  ISO image, Service Pack 6 and the Realtek RTL8139 network driver for NT. Of course it goes without saying, you should use a purchased copy of Windows NT.  Convert Windows NT SP 6 to ISO # mkisofs -o iso winntsp6.iso Convert Realtek Driver to ISO # mkisofs -o iso rtl8139.iso Create Windows NT Virtual Machine in KVM Provide the Windows NT Server ISO and configure the Virtual Machine using virt-manager. Set CPU Model to Pentium Windows NT (without SP6) can only boot on older CPU generations like Pentium.  Set Virtual Disk to IDE Windows NT does not have a virtio driver so we need to use IDE interface.  Set Network to RTL8139 Windows NT has drivers for Realtek 8139.  Configure Windows NT Server  Format Partition as NTFS  Select defaults other than NTFS for the partition.  Reboot Before rebooting change the boot order in virtual machine so that it boots from disk and not cdrom.  Windows NT Setup Enter license and otherwise select defaults and server role (DC or standalone).  Install Realtek 8139 Driver Mount the rtl8139.iso in the cdrom that was created above and install driver. Configure IP, Subnet, Gateway and DNS.  Login to Windows NT Server  Install Windows NT Server SP 6 Using ISO created above, mount the Windows NT SP6 ISO and run the installer. Note: A lesson learned back in the day: If you install the network card driver (or anything else for that matter) after Service Pack installation, just re-install the SP afterwards. This takes care of the dreaded “a service couldn’t be started” error.   Test Networking Ensure network stack is functional.  Congratulations!!! You just installed plus booted, an Operating System that has been off support since 2004 (over 10 years) and would most definitely not run on any modern hardware that exists today. Option 2: Importing from VMware Red Hat provides a tool called virt-v2v for converting from VMware or other virtualization platforms to RHV and KVM. Unfortunately in this case, Windows NT is simply too old and virt-v2v cannot recognize the operating system. Thankfully however the qemu-img command can easily convert a vmdk to qcow2. Convert VMDK to QCOW2 # qemu-img convert -f vmdk -O qcow2 winnt_server.vmdk winnt_server.qcow2 Once the image is converted you can import into KVM or RHV. Note: you need to remember to set CPU: Pentium, Virtual Disk Interface: IDE and NIC: RTL8139 after importing and before starting virtual machine. Importing Windows NT Server in RHV Now that we have a working Windows NT Server 4 SP6 qcow2 image it is time to import into Red Hat Virtualization (RHV). There are several options but we will explore two.  Importing into RHV directly from KVM (Libvirt) Importing using a script from Richard Jones (Colleague in Virtualization Group @Red Hat)  Option 1: Import using KVM (Libvirt) RHV has a direct integration and can import virtual machines directly from many virtualization platforms like Libvirt, VMware, Amazon EC2, etc. Configure KVM (Libvirt) to allow external connections [On KVM Host] Enable TCP connections to Libvirt Daemon #vi /etc/libvirt/libvirtd.conf listen_tls = 0 listen_tcp = 1 tcp_port = &quot;16509&quot; auth_tcp = &quot;none&quot; #vi /etc/sysconfig/libvirtd LIBVIRTD_ARGS=&quot;--listen&quot; Open Libvirt Port on Firewall firewall-cmd --permanent --add-port=&quot;16509/tcp&quot; firewall-cmd --reload Import Virtual Machine  In RHV management console under VM-&gt;Import select KVM as source. The URI should be &quot;qemu+tcp://IP/system&quot;. Once setting username and password select load to display the virtual machines running on KVM host. Select the Window NT Server virtual machine.  Choose Storage Domain Storage domains in RHV are similar to VMware datastores, this is where the virtual machines live. Here we will select a desired storage domain.  Once the import process is started you will be notified and can follow the process via the event monitor in RHV. Option 2: Import Using Script Richard Jones has created a very useful script that imports qcow2 images directly into RHV via the export domain (a special storage domain for importing templates). We really like this method for qcow2 because it doesn&#39;t try to convert the image like virt-v2v (which isn&#39;t needed) and you don’t need RHV to have direct access to another virtualization platform. The script and it&#39;s commits are stored here. In addition Richard Jones has also provided a blog on using his import script. Install the Script Select a host where you would like to install the script. The host shouldn’t be one of your RHV systems (neither RHV-H nor RHV-M). Then simply copy/paste or use curl to get the script from here. Install Dependencies # yum install perl-XML-Writer perl-Sys-Guestfs Configure Direct Image Conversion We don&#39;t want to convert image using libvirt but direct. # export LIBGUESTFS_BACKEND=direct Run Import Script The script needs to be able to access the export storage domain via NFS. Ensure the host running the export script can mount the NFS share locally and write there. Here the host providing the export domain mount is &quot;rhevh01.lab&quot; and the path is &quot;/usr/share/export&quot;. # ./import-to-ovirt.pl winnt_server.qcow2 rhevh01.lab:/usr/share/export The script will create the necessary structure and metadata and place things into the export storage domain in RHV. Import Image from Export Domain In RHV management under storage select the export storage domain. At the bottom select the tab &quot;VM Import&quot;. Here you should see the image we just imported.  Congratulations!!! You just successfully imported Windows NT Server into RHV. Confirm Settings Before starting the Windows NT virtual machine we will ensure the settings are correct and the VM is configured to present the supported hardware. Virtual Disk Set to IDE  Set CPU Model Okay, we are done and ready to start NT! No, wait a second… you might remember we said NT is only able to boot on older CPU families, we choose “Pentium” in virt-manager. Have a look at the CPU settings available for the VM in RHV, no Pentium or other archaeological  interesting CPU families to be seen. This doesn’t mean they aren’t there, underneath it’s KVM after all, but they are not exposed in the web UI. Fortunately RHV comes with a feature called “VDSM Hooks” that allows to run arbitrary scripts on VM actions and enables us to change almost every feature of a VM. Configure VDSM Plugin [On each Hypervisor (RHV-H) Host] Credit here goes to colleagues Martin Polednik and Michal Skrivanek for providing VDSM hook script. # vi /usr/libexec/vdsm/hooks/before_vm_start/50_cpufamily #!/usr/bin/python">
  <meta name="twitter:url" content="https://keithtenzer.com/rhv/keep-your-servers-and-run-your-applications-forever-with-red-hat-virtualization-powered-by-kvm/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2017-08-01T00:00:00-07:00">





  

  


<link rel="canonical" href="https://keithtenzer.com/rhv/keep-your-servers-and-run-your-applications-forever-with-red-hat-virtualization-powered-by-kvm/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Keith Tenzer",
      "url": "https://keithtenzer.com/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="KEITHTENZER.COM Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          KEITHTENZER.COM
          <span class="site-subtitle">Cloud Computing and Code</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/index.html">About</a>
            </li><li class="masthead__menu-item">
              <a href="/conferences-and-events/index.html">Conferences and Events</a>
            </li><li class="masthead__menu-item">
              <a href="/videos/index.html">Videos</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="https://keithtenzer.com/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#rhv" itemprop="item"><span itemprop="name">Rhv</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Keep Your Servers and Run Your Applications Forever with Red Hat Virtualization powered by KVM</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/main/me.png" alt="Keith Tenzer" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Keith Tenzer</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Principal Solutions Architect at Red Hat</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Los Angeles, CA</span>
        </li>
      

      
        
          
        
          
        
          
            <li><a href="https://twitter.com/keithtenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
        
          
            <li><a href="https://github.com/ktenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Keep Your Servers and Run Your Applications Forever with Red Hat Virtualization powered by KVM">
    <meta itemprop="description" content="OverviewThis article was written by myself and fellow colleague Götz Rieger. Often one of the most challenging problems we are facing today is both absorbing and leading change. Software defined-everything has taken over and is leveling the playing field, de-marginalizing staunch competitive advantages and nothing is safe anymore. Develop great applications and thrive or become irrelevant is the mantra facing many organizations. In such environments it is important to innovate constantly, delivering new capabilities at an ever increasing speed. In order to do so, new practices (DevOps), values (Agile) and of course technology (Containers) are being implemented. Today it seems almost everyone is focused on &quot;the new&quot; software-defined whatever, when in reality change happens at different levels and different speeds. Gartner tried to summarize this with &quot;mode 1 vs mode 2&quot; but that trivializes things too far. It comes down to application lifecycles which dictates dependency on change.  What if certain software doesn&#39;t need to change? What if it has a purpose and is already doing it&#39;s job function? What if the software cannot be ported to a new operating platform? What do you do then? The answer surprisingly, is maybe nothing? Maybe we let those applications live well beyond their intended support lifecycles. Consider the old programs in the Matrix, some found a way to survive and were not killed. These were also some of the most important, powerful programs. Virtualization has enabled us to let x86 platforms essentially run forever or at least well beyond their support lifecycles (hardware and software). If we consider outdated Cobol applications on UNIX or Windows platforms like NT, XP and 2003; they haven&#39;t been supported for years. Applications running on these platforms might are not able to migrate for whatever reason, else they would have already done so. If we think about it, this is in fact a very valid use case for virtualization. There are of course other considerations that are important, like isolation (since these applications are not receiving patches) but assuming that is handled, why not? If it ain&#39;t broken and doesn&#39;t need to change, why fix it? In this article we will look at how to run Windows NT Server (an operating system that hasn&#39;t been supported since 2004) on KVM and Red Hat Virtualization powered by KVM. PrerequisitesWe found two options to work well, a VMware VM with NT already installed and patched or install NT into a qemu/KVM VM. In order to continue you will need the following:Red Hat Virtualization (RHV) environment (Here we used RHV 4.1)KVMWindows NT installation medium (ISO) or a VMware virtual disk with pre-installed NTWARNING: Just to be clear Windows NT is not a supported guest OS for Red Hat Virtualization (RHV). That should be obvious since it isn&#39;t supported by Microsoft either.Option 1: Installing Windows NT ISOOn RHV we didn’t get the Windows NT 4.0 installer from the original boot CD to run without Blue Screening on us, so we had to take a detour. Windows NT 4.0 installs on qemu/KVM using virt-manager (RHEL 7.3 in this case). After installation, NT can be patched up to SP6 (which runs fine on RHV) and then the VM can be migrated to RHV. Remember in those days you couldn’t easily build a slip-stream CD with the updates integrated anyway.In order to install Windows NT you will need the original installation CD as  ISO image, Service Pack 6 and the Realtek RTL8139 network driver for NT. Of course it goes without saying, you should use a purchased copy of Windows NT. Convert Windows NT SP 6 to ISO# mkisofs -o iso winntsp6.isoConvert Realtek Driver to ISO# mkisofs -o iso rtl8139.isoCreate Windows NT Virtual Machine in KVMProvide the Windows NT Server ISO and configure the Virtual Machine using virt-manager.Set CPU Model to PentiumWindows NT (without SP6) can only boot on older CPU generations like Pentium.Set Virtual Disk to IDEWindows NT does not have a virtio driver so we need to use IDE interface.Set Network to RTL8139Windows NT has drivers for Realtek 8139.Configure Windows NT ServerFormat Partition as NTFS Select defaults other than NTFS for the partition.RebootBefore rebooting change the boot order in virtual machine so that it boots from disk and not cdrom.Windows NT SetupEnter license and otherwise select defaults and server role (DC or standalone).Install Realtek 8139 DriverMount the rtl8139.iso in the cdrom that was created above and install driver. Configure IP, Subnet, Gateway and DNS.Login to Windows NT ServerInstall Windows NT Server SP 6Using ISO created above, mount the Windows NT SP6 ISO and run the installer.Note: A lesson learned back in the day: If you install the network card driver (or anything else for that matter) after Service Pack installation, just re-install the SP afterwards. This takes care of the dreaded “a service couldn’t be started” error. Test NetworkingEnsure network stack is functional.Congratulations!!! You just installed plus booted, an Operating System that has been off support since 2004 (over 10 years) and would most definitely not run on any modern hardware that exists today.Option 2: Importing from VMwareRed Hat provides a tool called virt-v2v for converting from VMware or other virtualization platforms to RHV and KVM. Unfortunately in this case, Windows NT is simply too old and virt-v2v cannot recognize the operating system. Thankfully however the qemu-img command can easily convert a vmdk to qcow2.Convert VMDK to QCOW2# qemu-img convert -f vmdk -O qcow2 winnt_server.vmdk winnt_server.qcow2Once the image is converted you can import into KVM or RHV.Note: you need to remember to set CPU: Pentium, Virtual Disk Interface: IDE and NIC: RTL8139 after importing and before starting virtual machine.Importing Windows NT Server in RHVNow that we have a working Windows NT Server 4 SP6 qcow2 image it is time to import into Red Hat Virtualization (RHV). There are several options but we will explore two.Importing into RHV directly from KVM (Libvirt)Importing using a script from Richard Jones (Colleague in Virtualization Group @Red Hat)Option 1: Import using KVM (Libvirt)RHV has a direct integration and can import virtual machines directly from many virtualization platforms like Libvirt, VMware, Amazon EC2, etc.Configure KVM (Libvirt) to allow external connections[On KVM Host]Enable TCP connections to Libvirt Daemon#vi /etc/libvirt/libvirtd.conflisten_tls = 0listen_tcp = 1tcp_port = &quot;16509&quot;auth_tcp = &quot;none&quot;#vi /etc/sysconfig/libvirtdLIBVIRTD_ARGS=&quot;--listen&quot;Open Libvirt Port on Firewallfirewall-cmd --permanent --add-port=&quot;16509/tcp&quot;firewall-cmd --reloadImport Virtual Machine In RHV management console under VM-&gt;Import select KVM as source. The URI should be &quot;qemu+tcp://IP/system&quot;. Once setting username and password select load to display the virtual machines running on KVM host. Select the Window NT Server virtual machine.Choose Storage DomainStorage domains in RHV are similar to VMware datastores, this is where the virtual machines live. Here we will select a desired storage domain.Once the import process is started you will be notified and can follow the process via the event monitor in RHV.Option 2: Import Using ScriptRichard Jones has created a very useful script that imports qcow2 images directly into RHV via the export domain (a special storage domain for importing templates). We really like this method for qcow2 because it doesn&#39;t try to convert the image like virt-v2v (which isn&#39;t needed) and you don’t need RHV to have direct access to another virtualization platform. The script and it&#39;s commits are stored here. In addition Richard Jones has also provided a blog on using his import script.Install the ScriptSelect a host where you would like to install the script. The host shouldn’t be one of your RHV systems (neither RHV-H nor RHV-M). Then simply copy/paste or use curl to get the script from here.Install Dependencies# yum install perl-XML-Writer perl-Sys-GuestfsConfigure Direct Image ConversionWe don&#39;t want to convert image using libvirt but direct.# export LIBGUESTFS_BACKEND=directRun Import ScriptThe script needs to be able to access the export storage domain via NFS. Ensure the host running the export script can mount the NFS share locally and write there. Here the host providing the export domain mount is &quot;rhevh01.lab&quot; and the path is &quot;/usr/share/export&quot;.# ./import-to-ovirt.pl winnt_server.qcow2 rhevh01.lab:/usr/share/exportThe script will create the necessary structure and metadata and place things into the export storage domain in RHV.Import Image from Export DomainIn RHV management under storage select the export storage domain. At the bottom select the tab &quot;VM Import&quot;. Here you should see the image we just imported.Congratulations!!! You just successfully imported Windows NT Server into RHV.Confirm SettingsBefore starting the Windows NT virtual machine we will ensure the settings are correct and the VM is configured to present the supported hardware.Virtual Disk Set to IDESet CPU ModelOkay, we are done and ready to start NT! No, wait a second… you might remember we said NT is only able to boot on older CPU families, we choose “Pentium” in virt-manager. Have a look at the CPU settings available for the VM in RHV, no Pentium or other archaeological  interesting CPU families to be seen.This doesn’t mean they aren’t there, underneath it’s KVM after all, but they are not exposed in the web UI. Fortunately RHV comes with a feature called “VDSM Hooks” that allows to run arbitrary scripts on VM actions and enables us to change almost every feature of a VM.Configure VDSM Plugin[On each Hypervisor (RHV-H) Host]Credit here goes to colleagues Martin Polednik and Michal Skrivanek for providing VDSM hook script.# vi /usr/libexec/vdsm/hooks/before_vm_start/50_cpufamily#!/usr/bin/python">
    <meta itemprop="datePublished" content="2017-08-01T00:00:00-07:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Keep Your Servers and Run Your Applications Forever with Red Hat Virtualization powered by KVM
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2017-08-01T00:00:00-07:00">August 1, 2017</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          21 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h2><img class="alignnone  wp-image-11169" src="/assets/2017/08/kvm-tucha.png" alt="KVM-tucha" width="220" height="151" /><img class="alignnone  wp-image-5506" src="/assets/2017/08/plus_sign.gif" alt="plus_sign" width="155" height="155" /><img class="alignnone  wp-image-11178" src="/assets/2017/08/window4ntserver.png" alt="Window4NTserver" width="233" height="152" /></h2>
<h2>Overview</h2>
<p><span style="font-weight:400;">This article was written by myself and fellow colleague Götz Rieger. Often one of the most challenging problems we are facing today is both absorbing and leading change. Software defined-everything has taken over and is leveling the playing field, de-marginalizing staunch competitive advantages and nothing is safe anymore. Develop great applications and thrive or become irrelevant is the mantra facing many organizations. In such environments it is important to innovate constantly, delivering new capabilities at an ever increasing speed. In order to do so, new practices (DevOps), values (Agile) and of course technology (Containers) are being implemented. </span></p>
<p><span style="font-weight:400;">Today it seems almost everyone is focused on "the new" software-defined whatever, when in reality change happens at different levels and different speeds. Gartner tried to summarize this with "mode 1 vs mode 2" but that trivializes things too far. It comes down to application lifecycles which dictates dependency on change.  What if certain software doesn't need to change? What if it has a purpose and is already doing it's job function? What if the software cannot be ported to a new operating platform? What do you do then? The answer surprisingly, is maybe nothing? Maybe we let those applications live well beyond their intended support lifecycles. Consider the old programs in the Matrix, some found a way to survive and were not killed. These were also some of the most important, powerful programs. </span></p>
<p><span style="font-weight:400;">Virtualization has enabled us to let x86 platforms essentially run forever or at least well beyond their support lifecycles (hardware and software). If we consider outdated Cobol applications on UNIX or Windows platforms like NT, XP and 2003; they haven't been supported for years. Applications running on these platforms might are not able to migrate for whatever reason, else they would have already done so. If we think about it, this is in fact a very valid use case for virtualization. There are of course other considerations that are important, like isolation (since these applications are not receiving patches) but assuming that is handled, why not? If it ain't broken and doesn't need to change, why fix it? </span></p>
<p><span style="font-weight:400;">In this article we will look at how to run Windows NT Server (an operating system that hasn't been supported since 2004) on KVM and Red Hat Virtualization powered by KVM. </span></p>
<p><!--more--></p>
<h2>Prerequisites</h2>
<p style="display:inline !important;">We found two options to work well, a VMware VM with NT already installed and patched or install NT into a qemu/KVM VM. In order to continue you will need the following:</p>
<ul>
<li><a href="https://keithtenzer.com/2017/05/02/rhev-4-1-lab-installation-and-configuration-guide/">Red Hat Virtualization (RHV) environment</a> (Here we used RHV 4.1)</li>
<li>KVM</li>
<li>Windows NT installation medium (ISO) or a VMware virtual disk with pre-installed NT</li>
</ul>
<p>WARNING: Just to be clear Windows NT is <span style="text-decoration:underline;"><strong>not</strong></span> a supported guest OS for Red Hat Virtualization (RHV). That should be obvious since it isn't supported by Microsoft either.</p>
<h2>Option 1: Installing Windows NT ISO</h2>
<p><span style="font-weight:400;">On RHV we didn’t get the Windows NT 4.0 installer from the original boot CD to run without Blue Screening on us, so we had to take a detour. Windows NT 4.0 installs on qemu/KVM using virt-manager (RHEL 7.3 in this case). After installation, NT can be patched up to SP6 (which runs fine on RHV) and then the VM can be migrated to RHV. Remember in those days you couldn’t easily build a slip-stream CD with the updates integrated anyway.</span></p>
<p><span style="font-weight:400;">In order to install Windows NT you will need the original installation CD as  ISO image, Service Pack 6 and the Realtek RTL8139 network driver for NT. Of course it goes without saying, you should use a purchased copy of Windows NT. </span></p>
<p><strong>Convert Windows NT SP 6 to ISO</strong></p>
<pre># mkisofs -o iso winntsp6.iso</pre>
<p><strong>Convert Realtek Driver to ISO</strong></p>
<pre># mkisofs -o iso rtl8139.iso</pre>
<p><strong>Create Windows NT Virtual Machine in KVM</strong></p>
<p>Provide the Windows NT Server ISO and configure the Virtual Machine using virt-manager.</p>
<p><strong>Set CPU Model to Pentium</strong></p>
<p><span style="font-weight:400;">Windows NT (without SP6) can only boot on older CPU generations like Pentium.</span></p>
<p><img class="alignnone size-full wp-image-10776" src="/assets/2017/08/nt1.png" alt="nt1" width="425" height="410" /></p>
<p><strong>Set Virtual Disk to IDE</strong></p>
<p>Windows NT does not have a virtio driver so we need to use IDE interface.</p>
<p><img class="alignnone size-full wp-image-10778" src="/assets/2017/08/nt2.png" alt="nt2" width="503" height="318" /></p>
<p><strong>Set Network to RTL8139</strong></p>
<p>Windows NT has drivers for Realtek 8139.</p>
<p><img class="alignnone size-full wp-image-10779" src="/assets/2017/08/nt3.png" alt="nt3" width="642" height="133" /></p>
<p><strong>Configure Windows NT Server</strong></p>
<p><img class="alignnone size-full wp-image-10781" src="/assets/2017/08/nt4.png" alt="nt4" width="705" height="394" /></p>
<p><strong>Format Partition as NTFS </strong></p>
<p>Select defaults other than NTFS for the partition.</p>
<p><img class="alignnone size-full wp-image-10784" src="/assets/2017/08/nt5.png" alt="nt5" width="715" height="392" /></p>
<p><strong>Reboot</strong></p>
<p>Before rebooting change the boot order in virtual machine so that it boots from disk and not cdrom.</p>
<p><img class="alignnone size-full wp-image-10802" src="/assets/2017/08/nt6.png" alt="nt6" width="707" height="388" /></p>
<p><strong>Windows NT Setup</strong></p>
<p>Enter license and otherwise select defaults and server role (DC or standalone).</p>
<p><img class="alignnone size-full wp-image-10804" src="/assets/2017/08/nt7.png" alt="nt7" width="621" height="446" /></p>
<p><strong>Install Realtek 8139 Driver</strong></p>
<p>Mount the rtl8139.iso in the cdrom that was created above and install driver. Configure IP, Subnet, Gateway and DNS.</p>
<p><img class="alignnone size-full wp-image-10805" src="/assets/2017/08/nt8.png" alt="nt8" width="587" height="451" /></p>
<p><b>Login to Windows NT Server</b></p>
<p><img class="alignnone size-full wp-image-10808" src="/assets/2017/08/nt9.png" alt="nt9" width="807" height="637" /></p>
<p><strong>Install Windows NT Server SP 6</strong></p>
<p><span style="font-weight:400;">Using ISO created above, mount the Windows NT SP6 ISO and run the installer.</span></p>
<p><span style="font-weight:400;">Note: A lesson learned back in the day: If you install the network card driver (or anything else for that matter) after Service Pack installation, just re-install the SP afterwards. This takes care of the dreaded “a service couldn’t be started” error. </span></p>
<p><img class="alignnone size-full wp-image-10810" src="/assets/2017/08/nt10.png" alt="nt10" width="816" height="645" /></p>
<p><strong>Test Networking</strong></p>
<p>Ensure network stack is functional.</p>
<p><img class="alignnone size-full wp-image-10816" src="/assets/2017/08/nt111.png" alt="nt11" width="823" height="639" /></p>
<p><span style="font-weight:400;">Congratulations!!! You just installed plus booted, an Operating System that has been off support since 2004 (over 10 years) and would most definitely not run on any modern hardware that exists today.</span></p>
<h2>Option 2: Importing from VMware</h2>
<p><span style="font-weight:400;">Red Hat provides a tool called</span><a href="https://access.redhat.com/articles/1351473"> <span style="font-weight:400;">virt-v2v</span></a><span style="font-weight:400;"> for converting from VMware or other virtualization platforms to RHV and KVM. Unfortunately in this case, Windows NT is simply too old and virt-v2v cannot recognize the operating system. Thankfully however the qemu-img command can easily convert a vmdk to qcow2.</span></p>
<p><strong>Convert VMDK to QCOW2</strong></p>
<pre># qemu-img convert -f vmdk -O qcow2 winnt_server.vmdk winnt_server.qcow2</pre>
<p><span style="font-weight:400;">Once the image is converted you can import into KVM or RHV.</span></p>
<p><span style="font-weight:400;">Note: you need to remember to set CPU: Pentium, Virtual Disk Interface: IDE and NIC: RTL8139 after importing and before starting virtual machine.</span></p>
<h2>Importing Windows NT Server in RHV</h2>
<p>Now that we have a working Windows NT Server 4 SP6 qcow2 image it is time to import into Red Hat Virtualization (RHV). There are several options but we will explore two.</p>
<ul>
<li>Importing into RHV directly from KVM (Libvirt)</li>
<li>Importing using a script from <a href="http://rwmj.wordpress.com">Richard Jones</a> (Colleague in Virtualization Group @Red Hat)</li>
</ul>
<p><strong>Option 1: Import using KVM (Libvirt)</strong></p>
<p>RHV has a direct integration and can import virtual machines directly from many virtualization platforms like Libvirt, VMware, Amazon EC2, etc.</p>
<p><strong>Configure KVM (Libvirt) to allow external connections</strong></p>
<p class="screen"><strong>[On KVM Host]</strong></p>
<p><strong>Enable TCP connections to Libvirt Daemon</strong></p>
<pre class="screen">#vi /etc/libvirt/libvirtd.conf
listen_tls = 0
listen_tcp = 1
tcp_port = "16509"
auth_tcp = "none"</pre>
<pre class="screen">#vi /etc/sysconfig/libvirtd
LIBVIRTD_ARGS="--listen"</pre>
<p><strong>Open Libvirt Port on Firewall</strong></p>
<pre>firewall-cmd --permanent --add-port="16509/tcp"
firewall-cmd --reload</pre>
<p><strong>Import Virtual Machine </strong></p>
<p>In RHV management console under VM-&gt;Import select KVM as source. The URI should be "qemu+tcp://IP/system". Once setting username and password select load to display the virtual machines running on KVM host. Select the Window NT Server virtual machine.</p>
<p><img class="alignnone size-full wp-image-10786" src="/assets/2017/08/screenshot-from-2017-07-28-14-55-39.png" alt="Screenshot from 2017-07-28 14-55-39" width="984" height="808" /></p>
<p><strong>Choose Storage Domain</strong></p>
<p>Storage domains in RHV are similar to VMware datastores, this is where the virtual machines live. Here we will select a desired storage domain.</p>
<p><img class="alignnone size-full wp-image-10788" src="/assets/2017/08/screenshot-from-2017-07-28-14-56-10.png" alt="Screenshot from 2017-07-28 14-56-10" width="1234" height="380" /></p>
<p>Once the import process is started you will be notified and can follow the process via the event monitor in RHV.</p>
<p><b>Option 2: Import Using Script</b></p>
<p><span style="font-weight:400;">Richard Jones has created a very useful script that imports qcow2 images directly into RHV via the export domain (a special storage domain for importing templates). We really like this method for qcow2 because it doesn't try to convert the image like virt-v2v (which isn't needed) and you don’t need RHV to have direct access to another virtualization platform. The script and it's commits are stored</span><a href="http://git.annexia.org/?p=import-to-ovirt.git"> <span style="font-weight:400;">here</span></a><span style="font-weight:400;">. In addition Richard Jones has also provided a</span><a href="https://rwmj.wordpress.com/2015/09/18/importing-kvm-guests-to-ovirt-or-rhev/"> <span style="font-weight:400;">blog</span></a> <span style="font-weight:400;">on using his import script.</span></p>
<p><strong>Install the Script</strong></p>
<p><span style="font-weight:400;">Select a host where you would like to install the script. The host shouldn’t be one of your RHV systems (neither RHV-H nor RHV-M). Then simply copy/paste or use curl to get the script from</span><a href="http://git.annexia.org/?p=import-to-ovirt.git;a=blob_plain;f=import-to-ovirt.pl;hb=HEAD"> <span style="font-weight:400;">here</span></a><span style="font-weight:400;">.</span></p>
<p><strong>Install Dependencies</strong></p>
<pre># yum install perl-XML-Writer perl-Sys-Guestfs</pre>
<p><strong>Configure Direct Image Conversion</strong></p>
<p>We don't want to convert image using libvirt but direct.</p>
<pre># export LIBGUESTFS_BACKEND=direct</pre>
<p><strong>Run Import Script</strong></p>
<p><span style="font-weight:400;">The script needs to be able to access the export storage domain via NFS. Ensure the host running the export script can mount the NFS share locally and write there. Here the host providing the export domain mount is "rhevh01.lab" and the path is "/usr/share/export".</span></p>
<pre># ./import-to-ovirt.pl winnt_server.qcow2 rhevh01.lab:/usr/share/export</pre>
<p><span style="font-weight:400;">The script will create the necessary structure and metadata and place things into the export storage domain in RHV.</span></p>
<p><strong>Import Image from Export Domain</strong></p>
<p><span style="font-weight:400;">In RHV management under storage select the export storage domain. At the bottom select the tab "VM Import". Here you should see the image we just imported.</span></p>
<p><img class="alignnone size-full wp-image-10898" src="/assets/2017/08/rhev_nt_import.png" alt="rhev_nt_import" width="1329" height="612" /></p>
<p>Congratulations!!! You just successfully imported Windows NT Server into RHV.</p>
<h2>Confirm Settings</h2>
<p><span style="font-weight:400;">Before starting the Windows NT virtual machine we will ensure the settings are correct and the VM is configured to present the supported hardware.</span></p>
<p><strong>Virtual Disk Set to IDE</strong></p>
<p><img class="alignnone size-full wp-image-10789" src="/assets/2017/08/screenshot-from-2017-07-28-15-35-14.png" alt="Screenshot from 2017-07-28 15-35-14" width="1002" height="475" /></p>
<h3><strong>Set CPU Model</strong></h3>
<p><span style="font-weight:400;">Okay, we are done and ready to start NT! No, wait a second… you might remember we said NT is only able to boot on older CPU families, we choose “Pentium” in virt-manager. Have a look at the CPU settings available for the VM in RHV, no Pentium or other archaeological  interesting CPU families to be seen.</span></p>
<p><span style="font-weight:400;">This doesn’t mean they aren’t there, underneath it’s KVM after all, but they are not exposed in the web UI. Fortunately RHV comes with a feature called “VDSM Hooks” that allows to run arbitrary scripts on VM actions and enables us to change almost every feature of a VM.</span></p>
<p><strong>Configure VDSM Plugin</strong></p>
<p><strong>[On each Hypervisor (RHV-H) Host]</strong></p>
<p>Credit here goes to colleagues Martin Polednik and Michal Skrivanek for providing VDSM hook script.</p>
<pre># vi /usr/libexec/vdsm/hooks/before_vm_start/50_cpufamily</pre>
<pre>#!/usr/bin/python

import os
import sys
import hooking
import traceback

if os.environ.has_key('cpufamily'):
 try:
    domxml = hooking.read_domxml()   #here we read the VM XML into the domxml variable
    vcpu = domxml.getElementsByTagName('cpu')[0] #find and read the CPU definition in the VM XML
    vcpu.setAttribute('mode', 'custom')
    vcpu.setAttribute('match', 'exact')
    vcpu.setAttribute('check', 'partial')
    sys.stderr.write('cpufamily: Changing cpu family to: %s\n' % os.environ['cpufamily'])  #sys.stderr.write is caught by vdsm and logged into vdsm.log for debugging
    e = domxml.createElement('model')
    e.setAttribute('fallback', 'forbid')
    txt = domxml.createTextNode(os.environ['cpufamily'])
    e.appendChild(txt)
    modelnode = vcpu.getElementsByTagName('model')[0]
    vcpu.replaceChild(e,modelnode)

    # Set topology sockets to N (example uses N = 1).
    topo = vcpu.getElementsByTagName('topology')[0]
    topo.setAttribute('sockets', '1') # &lt;- N

    # Edit  element's text node.
    vcpu = domxml.getElementsByTagName('vcpu')[0]
    vcpu.firstChild.nodeValue = 1

    hooking.write_domxml(domxml) #and write to the altered domxml
 except:
    sys.stderr.write('cpufamily: [unexpected error]: %s\n' % traceback.format_exc())
    sys.exit(2)
</pre>
<p><strong>Make VDSM plugin executable</strong></p>
<pre><span style="font-weight:400;"># chmod +x /usr/libexec/vdsm/hooks/before_vm_start/50_cpufamily</span></pre>
<p><strong>How the VDSM Hook Works</strong></p>
<ul>
<li style="font-weight:400;"><span style="font-weight:400;">Looks if there is a configuration key named “cpufamily” in this VMs configuration.</span></li>
<li style="font-weight:400;"><span style="font-weight:400;">Sets the CPU model to the value of the key.</span></li>
<li style="font-weight:400;"><span style="font-weight:400;">Does some CPU topology corrections.</span></li>
</ul>
<p><span style="font-weight:400;">So what’s missing is the key/value pair for the hook script. This can be set as a custom attribute, inside the VM. </span></p>
<p><strong>Set Custom Attribute in VM</strong></p>
<p><strong>[On RHV-Manager Host]</strong></p>
<pre><span style="font-weight:400;"># engine-config -s UserDefinedVMProperties='cpufamily=^(Conroe|Penryn|Nehalem|Westmere|SandyBridge|pentium)$' --cver=4.1</span></pre>
<p><span style="font-weight:400;">This sets the user defined property “cpufamily” and supplies a number of values you can choose from in the web UI. </span><br />
<span style="font-weight:400;">Note: A list of the supported CPU models can be found on your RHV Hypervisors under </span><span style="font-weight:400;">/usr/share/libvirt/cpu_map.xml</span><span style="font-weight:400;">.</span></p>
<p><strong>Restart RHV-M Engine</strong></p>
<pre><span style="font-weight:400;"># systemctl restart ovirt-engine</span></pre>
<p><strong>Set CPU Type to Pentium</strong></p>
<p><span style="font-weight:400;">In the settings of your NT VM in RHV-M go to “Custom Properties”, you should have a key named “cpufamily”, set it to “pentium”.</span></p>
<p><img class="alignnone size-full wp-image-11137" src="/assets/2017/08/nt_1111.png" alt="nt_1111" width="779" height="567" /></p>
<p><strong>NIC Set to RTL8139</strong></p>
<p><span style="font-weight:400;">The last step is to configure the network card as Realtek 8139 so the network configuration inside the VM works. Select the VM and at bottom there is a tab for network and there you can add or edit the network interface.</span></p>
<p><img class="alignnone size-full wp-image-10795" src="/assets/2017/08/screenshot-from-2017-07-28-15-44-51.png" alt="Screenshot from 2017-07-28 15-44-51" width="618" height="504" /></p>
<p>&nbsp;</p>
<h2>Start Windows NT Virtual Machine on RHV</h2>
<p><span style="font-weight:400;">The moment has arrived where you can finally start the Windows NT virtual machine. I know, you can cut through the excitement with a knife. Again check to ensure network connectivity is working (likely you will need to reconfigure TCP/IP inside virtual machine).</span></p>
<p><img class="alignnone size-full wp-image-10797" src="/assets/2017/08/screenshot-from-2017-07-28-15-55-06.png" alt="Screenshot from 2017-07-28 15-55-06" width="1919" height="839" /></p>
<p>This is exactly what success feels like!!!</p>
<h2>Windows NT Server HA</h2>
<p>Things have changed a lot since Windows NT era, one thing that has significantly improved is HA. <span style="font-weight:400;">Once Windows NT Server is running we can use migrate option and automatically migrate the virtual machine to another Hypervisor. </span></p>
<p><strong>Select Hypervisor</strong></p>
<p><span style="font-weight:400;">Here we see the Windows NT virtual machine running on "rhevh02.lab" and will migrate to "rhevh01.lab".</span></p>
<p><img class="alignnone size-full wp-image-10936" src="/assets/2017/08/nt_migrate1.png" alt="nt_migrate1" width="1597" height="700" /></p>
<p><strong>Migrate Virtual Machine</strong></p>
<p><span style="font-weight:400;">During the migration the virtual machine is locked, meaning actions like start and stop are not allowed. </span></p>
<p><img class="alignnone size-full wp-image-10938" src="/assets/2017/08/nt_migrate2.png" alt="nt_migrate2" width="1593" height="63" /></p>
<p><strong>Migration Complete</strong></p>
<p><span style="font-weight:400;">Viewing the event log in RHV we can see when the migration operation started and completed.</span></p>
<p><img class="alignnone size-full wp-image-10940" src="/assets/2017/08/nt_mi9grate3.png" alt="nt_mi9grate3" width="1402" height="72" /></p>
<h2>Summary</h2>
<p><span style="font-weight:400;">In this article we discussed one of the least talked about virtualization use cases, extending application and operating system lifecycles well beyond intended support of hardware or software. Using Windows NT Server, an operating system introduced in 1996 that went end-of-life in 2004, we walked through steps of bringing things online in both KVM and Red Hat Virtualization (RHV) powered by KVM. Hopefully this article brings to light the point that if it ain't broken, maybe just maybe you don't need to fix it!</span></p>
<p>Happy Virtualizing!</p>
<p>(c) 2017 Keith Tenzer</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#kvm" class="page__taxonomy-item" rel="tag">KVM</a><span class="sep">, </span>
    
      <a href="/tags/#linux" class="page__taxonomy-item" rel="tag">Linux</a><span class="sep">, </span>
    
      <a href="/tags/#nt" class="page__taxonomy-item" rel="tag">NT</a><span class="sep">, </span>
    
      <a href="/tags/#rhev" class="page__taxonomy-item" rel="tag">RHEV</a><span class="sep">, </span>
    
      <a href="/tags/#rhv-h" class="page__taxonomy-item" rel="tag">RHV-H</a><span class="sep">, </span>
    
      <a href="/tags/#rhv-m" class="page__taxonomy-item" rel="tag">RHV-M</a><span class="sep">, </span>
    
      <a href="/tags/#virtual-machine" class="page__taxonomy-item" rel="tag">Virtual Machine</a><span class="sep">, </span>
    
      <a href="/tags/#virtualization" class="page__taxonomy-item" rel="tag">Virtualization</a><span class="sep">, </span>
    
      <a href="/tags/#windows" class="page__taxonomy-item" rel="tag">Windows</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#rhv" class="page__taxonomy-item" rel="tag">RHV</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-08-01T00:00:00-07:00">August 1, 2017</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=keithtenzer&text=Keep+Your+Servers+and+Run+Your+Applications+Forever+with+Red+Hat+Virtualization+powered+by+KVM%20https%3A%2F%2Fkeithtenzer.com%2Frhv%2Fkeep-your-servers-and-run-your-applications-forever-with-red-hat-virtualization-powered-by-kvm%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fkeithtenzer.com%2Frhv%2Fkeep-your-servers-and-run-your-applications-forever-with-red-hat-virtualization-powered-by-kvm%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fkeithtenzer.com%2Frhv%2Fkeep-your-servers-and-run-your-applications-forever-with-red-hat-virtualization-powered-by-kvm%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/cloudforms/openshift-showback-reporting-using-cloudforms/" class="pagination--pager" title="OpenShift Showback Reporting using CloudForms
">Previous</a>
    
    
      <a href="/openshift/openshift-3-6-fast-track-everything-you-need-nothing-you-dont/" class="pagination--pager" title="OpenShift 3.6 Fast Track: Everything You Need, Nothing You Don’t
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/openshift/openshift-service-mesh-getting-started-guide/" rel="permalink">OpenShift Service Mesh Getting Started Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-04-27T00:00:00-07:00">April 27, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">






Overview
In this article we will explore the OpenShift Service Mesh and deploy a demo application to better understand the various concepts. First you...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/openshift/openshift-4-aws-ipi-installation-getting-started-guide/" rel="permalink">OpenShift 4 AWS IPI Installation Getting Started Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-01-18T00:00:00-08:00">January 18, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          8 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">


Happy new year as this will be the first post of 2021! 2020 was obviously a challenging year, my hope is I will have more time to devote to blogging in 20...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ansible/windows-automation-with-ansible-getting-started-guide/" rel="permalink">Windows Automation with Ansible: Getting Started Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2020-05-19T00:00:00-07:00">May 19, 2020</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          14 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
Overview
In this article we will focus on how to get started with automation of windows using Ansible. Specifically we will look at installing 3rd party sof...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/general/red-hat-subscription-reporting-guide/" rel="permalink">Red Hat Subscription Reporting Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2020-05-13T00:00:00-07:00">May 13, 2020</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
source: https://www.cio.com/article/3199910/zuora-blazes-a-new-trail-to-the-subscription-economy-and-a-post-erp-world.html
Overview
This article will look a...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/keithtenzer"" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/ktenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Keith Tenzer. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
