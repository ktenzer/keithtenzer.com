<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
<link rel="icon" href="/assets/main/me.png">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Red Hat Enterprise Virtualization (RHEV) - Management Options - Keith Tenzer’s Blog</title>
<meta name="description" content="Overview RHEV has two separate distinct layers, the hypervisor itself and management. The hypervisor layer, RHEV-H is of course built on Red Hat Enterprise Linux (RHEL) and utilizes KVM for the hypervisor technology. RHEV-H can be configured using pre-built RHEV-H image or using standard RHEL. The management layer, Red Hat Enterprise Virtualization Management (RHEV-M) provides management for a multi-hypervisor environment and uses concepts such as datacenters, clusters, networks and storage domains to describe virtualization resources. In this article we will focus on options for configuring RHEV-M. The upstream opensource project behind RHEV-M is oVirt. There are two options as of RHEV 3.5 for configuring RHEV-M, standalone or hosted engine. Below are other articles you may find of interest relating to RHEV:  RHEV Overview and Home Lab Configuration RHEVM Overview and APIs RHEV Hypervisor Host Options   RHEV-M Standalone RHEV-M standalone means configuring a RHEL physical or virtual system as a RHEV-M host. PROS  Flexibility can install RHEV-M on any RHEL 6 host.  CONS  HA not built-in, you need to deal with HA on your own. Can&#39;t use RHEL 7. Requires additional host outside of virtualization environment. RHEV-M runs outside virtualization environment and as such cannot directly utilize virtualization resources such as storage.  To configure RHEV using this method follow the steps in this already posted article. RHEV-M Hosted Engine RHEV-M hosted engine means configuring RHEV-M as a virtual machine directly on a hypervisor host. RHEV-M lives inside the virtualization environment it is managing. Before configuring hypervisor host, RHEV-M must be configured. As such hosted engine is installed using yum directly on chosen hypervisor host. Simply install RHEL 7 and follow the steps listed further below in this article. PROS  Takes advantage of RHEV, HA is built-in. Simplified and streamlined installation of RHEV. Does not require separate host system.  CONS  At least one hypervisor must be running in order to access RHEV-M. If there are multiple-separate virtualization environments complexity could be greater.  Follow the below guide to configure a RHEV environment using the hosted engine.  Enable required repositories.  [root@rhevh01 ~]# subscription-manager register [root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189 [root@rhevh01 ~]# subscription-manager repos --disable=* [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-optional-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms  [root@rhevh01 ~]# yum update -y The hosted engine requires an NFS or ISCSI share. In this case we will use NFSv3 and create a local share on our hypervisor host. This storage is only used for hosted engine and won&#39;t show up in RHEV-M.  Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5, at least that has been my experience.  [root@rhevh01 ~]# yum -y install iptables-services  Disable firewalld.  [root@rhevh01 ~]# systemctl stop firewalld [root@rhevh01 ~]# systemctl disable firewalld  Enable iptables (optional).  [root@rhevh01 ~]# systemctl enable iptables [root@rhevh01 ~]# systemctl start iptables  Configure iptables rules for RHEV and NFS (optional).  [root@rhevh01 ~]# vi /etc/sysconfig/iptables *filter :INPUT ACCEPT [0:0] :FORWARD ACCEPT [0:0] :OUTPUT ACCEPT [64:6816] -A INPUT -p udp -m udp --dport 32769 -j ACCEPT -A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT -A INPUT -p udp -m udp --dport 662 -j ACCEPT -A INPUT -p tcp -m tcp --dport 662 -j ACCEPT -A INPUT -p udp -m udp --dport 875 -j ACCEPT -A INPUT -p tcp -m tcp --dport 875 -j ACCEPT -A INPUT -p udp -m udp --dport 892 -j ACCEPT -A INPUT -p tcp -m tcp --dport 892 -j ACCEPT -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT -A INPUT -p icmp -j ACCEPT -A INPUT -i lo -j ACCEPT -A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT -A INPUT -p tcp -m tcp --dport 111 -j ACCEPT -A INPUT -p udp -m udp --dport 111 -j ACCEPT -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT -A INPUT -p udp -m udp --dport 161 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT -A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT -A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT -A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT -A INPUT -p udp -m udp --dport 963 -j ACCEPT -A INPUT -p tcp -m tcp --dport 965 -j ACCEPT -A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT -A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT -A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT -A INPUT -j REJECT --reject-with icmp-host-prohibited -A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibited COMMIT  Restart iptables (optional).  [root@rhevh01 ~]# systemctl restart iptables  Configure NFS Services.  [root@rhevh01 ~]# yum install nfs-utils rpcbind [root@rhevh01 ~]# systemctl enable rpcbind [root@rhevh01 ~]# systemctl enable nfs-server [root@rhevh01 ~]# systemctl start rpcbind [root@rhevh01 ~]# systemctl start nfs-server  Configure NFS Share.  [root@rhevh01 ~]# mkdir /usr/share/rhev [root@rhevh01 ~]# chown -R 36:36 /usr/share/rhev [root@rhevh01 ~]# chmod -R 0755 /usr/share/rhev [root@rhevh01 ~]# vi /etc/exports  /usr/share/rhev 192.168.2.0/24(rw) [root@rhevh01 ~]# exportfs -a  Install Hosted Engine.  [root@rhevh01 ~]# yum install -y ovirt-hosted-engine-setup Note: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained here.  Install X11 libraries (optional).  [root@rhevh01 ~]# yum groupinstall -y &quot;Server with GUI&quot;  Configure Hosted Engine. Note: in this example, screen is used and this is strongly recommended if installing through ssh connection. In fact, anytime you are working through ssh you should use screen, if something unexpected happens you can reconnect.  [root@rhevh01 ~]# yum install -y screen [root@rhevh01 ~]# screen hosted-engine --deploy --== VM CONFIGURATION ==-- Please specify the device to boot the VM from (cdrom, disk, pxe) [cdrom]: disk  Please specify path to OVF archive you would like to use [None]: /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova [ INFO ] Checking OVF archive content (could take a few minutes depending on archive size) [ INFO ] Checking OVF XML content (could take a few minutes depending on archive size) [WARNING] OVF does not contain a valid image description, using default.  Please specify an alias for the Hosted Engine image [hosted_engine]:  The following CPU types are supported by this host:  - model_SandyBridge: Intel SandyBridge Family  - model_Westmere: Intel Westmere Family  - model_Nehalem: Intel Nehalem Family  - model_Penryn: Intel Penryn Family  - model_Conroe: Intel Conroe Family  Please specify the CPU type to be used by the VM [model_SandyBridge]: [WARNING] Minimum requirements for CPUs not met  You may specify a unicast MAC address for the VM or accept a randomly generated default [00:16:3e:04:eb:78]:  Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]: spice --== HOSTED ENGINE CONFIGURATION ==-- Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]:  Enter &#39;admin@internal&#39; user password that will be used for accessing the Administrator Portal:  Confirm &#39;admin@internal&#39; user password:  Please provide the FQDN for the engine you would like to use.  This needs to match the FQDN that you will use for the engine installation within the VM.  Note: This will be the FQDN of the VM you are now going to create,  it should not point to the base host or to any other existing machine.  Engine FQDN: he01.lab [WARNING] Failed to resolve he01.lab using DNS, it can be resolved only locally  Please provide the name of the SMTP server through which we will send notifications [localhost]:  Please provide the TCP port number of the SMTP server [25]:  Please provide the email address from which notifications will be sent [root@localhost]:  Please provide a comma-separated list of email addresses which will get notifications [root@localhost]: [ INFO ] Stage: Setup validation [WARNING] Failed to resolve rhevh01.lab using DNS, it can be resolved only locally --== CONFIGURATION PREVIEW ==-- Bridge interface : eno1  Engine FQDN : he01.lab  Bridge name : rhevm  SSH daemon port : 22  Firewall manager : iptables  Gateway address : 192.168.0.1  Host name for web application : hosted_engine_1  Host ID : 1  Image alias : hosted_engine  Image size GB : 50  Storage connection : rhevh01.lab:/usr/share/rhev  Console type : qxl  Memory size MB : 4096  MAC address : 00:16:3e:04:eb:78  Boot type : disk  Number of CPUs : 1  OVF archive (for disk boot) : /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova  CPU Type : model_SandyBridge Please confirm installation settings (Yes, No)[Yes]: Once you confirm settings the hosted engine will be deployed and you will be prompted to connect to the console of the hosted engine.  Using remote-viewer connect to console of hosted engine.  [root@rhevh01 ~]# /bin/remote-viewer --spice-ca-file=/etc/pki/vdsm/libvirt-spice/ca-cert.pem spice://localhost?tls-port=5901 --spice-host-subject=&quot;C=EN, L=Test, O=Test, CN=Test&quot;   Configure authentication settings and set root password in the tools menu. Configure networking. Register with subscription manager.  [root@rhevm ~]# subscription-manager register [root@rhevm ~]# subscription-manager attach --pool=3948394898198989000922  Configure yum repositories.  [root@rhevm ~]# subscription-manager repos --disable=*  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-optional-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-supplementary-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhev-mgmt-agent-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhevm-3.5-rpms  Installed RHEV-M.  # yum update -y # yum install -y rhevm # engine-setup  After completing engine-setup go back to hypervisor and press [1] to continue hosted engine setup.  [ INFO ] Engine replied: DB Up!Welcome to Health Status!  Enter the name of the cluster to which you want to add the host (Default) [Default]: [ INFO ] Waiting for the host to become operational in the engine. This may take several minutes... [ INFO ] Still waiting for VDSM host to become operational... [ INFO ] Still waiting for VDSM host to become operational... [ INFO ] The VDSM Host is now operational  Please shutdown the VM allowing the system to launch it as a monitored service.  The system will wait until the VM is down.  Shutdown the hosted engine VM.  [root@rhevm ~]# shutdown -h now Once the hosted VM is shutdown, the installation completes. Congrats, you have successfully deployed a RHEV environment with the hosted engine option. Add Additional Hypervisor Host to RHEV-M Hosted Engine Adding an additional hypervisor host using the hosted engine is a simple process.  Enable required repositories.  [root@rhevh01 ~]# subscription-manager register [root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189 [root@rhevh02 ~]# subscription-manager repos --disable=* [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-optional-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms  [root@rhevh02 ~]# yum update -y  Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5.  [root@rhevh02 ~]# yum -y install iptables-services  Disable firewalld.  [root@rhevh02 ~]# systemctl stop firewalld [root@rhevh02 ~]# systemctl disable firewalld  Enable iptables (optional).  [root@rhevh02 ~]# systemctl enable iptables [root@rhevh02 ~]# systemctl start iptables  Configure iptables rules for RHEV and NFS (optional).  [root@rhevh02 ~]# vi /etc/sysconfig/iptables *filter :INPUT ACCEPT [0:0] :FORWARD ACCEPT [0:0] :OUTPUT ACCEPT [64:6816] -A INPUT -p udp -m udp --dport 32769 -j ACCEPT -A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT -A INPUT -p udp -m udp --dport 662 -j ACCEPT -A INPUT -p tcp -m tcp --dport 662 -j ACCEPT -A INPUT -p udp -m udp --dport 875 -j ACCEPT -A INPUT -p tcp -m tcp --dport 875 -j ACCEPT -A INPUT -p udp -m udp --dport 892 -j ACCEPT -A INPUT -p tcp -m tcp --dport 892 -j ACCEPT -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT -A INPUT -p icmp -j ACCEPT -A INPUT -i lo -j ACCEPT -A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT -A INPUT -p tcp -m tcp --dport 111 -j ACCEPT -A INPUT -p udp -m udp --dport 111 -j ACCEPT -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT -A INPUT -p udp -m udp --dport 161 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT -A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT -A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT -A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT -A INPUT -p udp -m udp --dport 963 -j ACCEPT -A INPUT -p tcp -m tcp --dport 965 -j ACCEPT -A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT -A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT -A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT -A INPUT -j REJECT --reject-with icmp-host-prohibited -A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibited COMMIT  Restart iptables (optional).  [root@rhevh02 ~]# systemctl restart iptables  Install Hosted Engine.  [root@rhevh02 ~]# yum install -y ovirt-hosted-engine-setup Note: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained here.  Install X11 libraries (optional).  [root@rhevh02 ~]# yum groupinstall -y &quot;Server with GUI&quot;  Configure Hosted Engine. Note: in this example screen is used and this is strongly recommended if installing through ssh connection.  [root@rhevh02 ~]# yum install -y screen [root@rhevh02 ~]# screen hosted-engine --deploy When prompted for storage connection, provide the same NFS share used when originally configuring hosted engine [rhevh01.lab:/usr/share/rhev]. The install script will detect the storage connection and instead of deploying hosted engine, will add the hypervisor host to already running hosted engine. In order to interact with the hosted engine, the hosted-engine CLI must be used. You can start, stop and get the status of the hosted engine using this CLI tool. [root@rhevh01 ~]# hosted-engine --vm-status">


  <meta name="author" content="Keith Tenzer">
  
  <meta property="article:author" content="Keith Tenzer">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Keith Tenzer's Blog">
<meta property="og:title" content="Red Hat Enterprise Virtualization (RHEV) - Management Options">
<meta property="og:url" content="http://localhost:4000/rhev/red-hat-enterprise-virtualization-rhev-management-options/">


  <meta property="og:description" content="Overview RHEV has two separate distinct layers, the hypervisor itself and management. The hypervisor layer, RHEV-H is of course built on Red Hat Enterprise Linux (RHEL) and utilizes KVM for the hypervisor technology. RHEV-H can be configured using pre-built RHEV-H image or using standard RHEL. The management layer, Red Hat Enterprise Virtualization Management (RHEV-M) provides management for a multi-hypervisor environment and uses concepts such as datacenters, clusters, networks and storage domains to describe virtualization resources. In this article we will focus on options for configuring RHEV-M. The upstream opensource project behind RHEV-M is oVirt. There are two options as of RHEV 3.5 for configuring RHEV-M, standalone or hosted engine. Below are other articles you may find of interest relating to RHEV:  RHEV Overview and Home Lab Configuration RHEVM Overview and APIs RHEV Hypervisor Host Options   RHEV-M Standalone RHEV-M standalone means configuring a RHEL physical or virtual system as a RHEV-M host. PROS  Flexibility can install RHEV-M on any RHEL 6 host.  CONS  HA not built-in, you need to deal with HA on your own. Can&#39;t use RHEL 7. Requires additional host outside of virtualization environment. RHEV-M runs outside virtualization environment and as such cannot directly utilize virtualization resources such as storage.  To configure RHEV using this method follow the steps in this already posted article. RHEV-M Hosted Engine RHEV-M hosted engine means configuring RHEV-M as a virtual machine directly on a hypervisor host. RHEV-M lives inside the virtualization environment it is managing. Before configuring hypervisor host, RHEV-M must be configured. As such hosted engine is installed using yum directly on chosen hypervisor host. Simply install RHEL 7 and follow the steps listed further below in this article. PROS  Takes advantage of RHEV, HA is built-in. Simplified and streamlined installation of RHEV. Does not require separate host system.  CONS  At least one hypervisor must be running in order to access RHEV-M. If there are multiple-separate virtualization environments complexity could be greater.  Follow the below guide to configure a RHEV environment using the hosted engine.  Enable required repositories.  [root@rhevh01 ~]# subscription-manager register [root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189 [root@rhevh01 ~]# subscription-manager repos --disable=* [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-optional-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms  [root@rhevh01 ~]# yum update -y The hosted engine requires an NFS or ISCSI share. In this case we will use NFSv3 and create a local share on our hypervisor host. This storage is only used for hosted engine and won&#39;t show up in RHEV-M.  Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5, at least that has been my experience.  [root@rhevh01 ~]# yum -y install iptables-services  Disable firewalld.  [root@rhevh01 ~]# systemctl stop firewalld [root@rhevh01 ~]# systemctl disable firewalld  Enable iptables (optional).  [root@rhevh01 ~]# systemctl enable iptables [root@rhevh01 ~]# systemctl start iptables  Configure iptables rules for RHEV and NFS (optional).  [root@rhevh01 ~]# vi /etc/sysconfig/iptables *filter :INPUT ACCEPT [0:0] :FORWARD ACCEPT [0:0] :OUTPUT ACCEPT [64:6816] -A INPUT -p udp -m udp --dport 32769 -j ACCEPT -A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT -A INPUT -p udp -m udp --dport 662 -j ACCEPT -A INPUT -p tcp -m tcp --dport 662 -j ACCEPT -A INPUT -p udp -m udp --dport 875 -j ACCEPT -A INPUT -p tcp -m tcp --dport 875 -j ACCEPT -A INPUT -p udp -m udp --dport 892 -j ACCEPT -A INPUT -p tcp -m tcp --dport 892 -j ACCEPT -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT -A INPUT -p icmp -j ACCEPT -A INPUT -i lo -j ACCEPT -A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT -A INPUT -p tcp -m tcp --dport 111 -j ACCEPT -A INPUT -p udp -m udp --dport 111 -j ACCEPT -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT -A INPUT -p udp -m udp --dport 161 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT -A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT -A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT -A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT -A INPUT -p udp -m udp --dport 963 -j ACCEPT -A INPUT -p tcp -m tcp --dport 965 -j ACCEPT -A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT -A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT -A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT -A INPUT -j REJECT --reject-with icmp-host-prohibited -A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibited COMMIT  Restart iptables (optional).  [root@rhevh01 ~]# systemctl restart iptables  Configure NFS Services.  [root@rhevh01 ~]# yum install nfs-utils rpcbind [root@rhevh01 ~]# systemctl enable rpcbind [root@rhevh01 ~]# systemctl enable nfs-server [root@rhevh01 ~]# systemctl start rpcbind [root@rhevh01 ~]# systemctl start nfs-server  Configure NFS Share.  [root@rhevh01 ~]# mkdir /usr/share/rhev [root@rhevh01 ~]# chown -R 36:36 /usr/share/rhev [root@rhevh01 ~]# chmod -R 0755 /usr/share/rhev [root@rhevh01 ~]# vi /etc/exports  /usr/share/rhev 192.168.2.0/24(rw) [root@rhevh01 ~]# exportfs -a  Install Hosted Engine.  [root@rhevh01 ~]# yum install -y ovirt-hosted-engine-setup Note: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained here.  Install X11 libraries (optional).  [root@rhevh01 ~]# yum groupinstall -y &quot;Server with GUI&quot;  Configure Hosted Engine. Note: in this example, screen is used and this is strongly recommended if installing through ssh connection. In fact, anytime you are working through ssh you should use screen, if something unexpected happens you can reconnect.  [root@rhevh01 ~]# yum install -y screen [root@rhevh01 ~]# screen hosted-engine --deploy --== VM CONFIGURATION ==-- Please specify the device to boot the VM from (cdrom, disk, pxe) [cdrom]: disk  Please specify path to OVF archive you would like to use [None]: /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova [ INFO ] Checking OVF archive content (could take a few minutes depending on archive size) [ INFO ] Checking OVF XML content (could take a few minutes depending on archive size) [WARNING] OVF does not contain a valid image description, using default.  Please specify an alias for the Hosted Engine image [hosted_engine]:  The following CPU types are supported by this host:  - model_SandyBridge: Intel SandyBridge Family  - model_Westmere: Intel Westmere Family  - model_Nehalem: Intel Nehalem Family  - model_Penryn: Intel Penryn Family  - model_Conroe: Intel Conroe Family  Please specify the CPU type to be used by the VM [model_SandyBridge]: [WARNING] Minimum requirements for CPUs not met  You may specify a unicast MAC address for the VM or accept a randomly generated default [00:16:3e:04:eb:78]:  Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]: spice --== HOSTED ENGINE CONFIGURATION ==-- Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]:  Enter &#39;admin@internal&#39; user password that will be used for accessing the Administrator Portal:  Confirm &#39;admin@internal&#39; user password:  Please provide the FQDN for the engine you would like to use.  This needs to match the FQDN that you will use for the engine installation within the VM.  Note: This will be the FQDN of the VM you are now going to create,  it should not point to the base host or to any other existing machine.  Engine FQDN: he01.lab [WARNING] Failed to resolve he01.lab using DNS, it can be resolved only locally  Please provide the name of the SMTP server through which we will send notifications [localhost]:  Please provide the TCP port number of the SMTP server [25]:  Please provide the email address from which notifications will be sent [root@localhost]:  Please provide a comma-separated list of email addresses which will get notifications [root@localhost]: [ INFO ] Stage: Setup validation [WARNING] Failed to resolve rhevh01.lab using DNS, it can be resolved only locally --== CONFIGURATION PREVIEW ==-- Bridge interface : eno1  Engine FQDN : he01.lab  Bridge name : rhevm  SSH daemon port : 22  Firewall manager : iptables  Gateway address : 192.168.0.1  Host name for web application : hosted_engine_1  Host ID : 1  Image alias : hosted_engine  Image size GB : 50  Storage connection : rhevh01.lab:/usr/share/rhev  Console type : qxl  Memory size MB : 4096  MAC address : 00:16:3e:04:eb:78  Boot type : disk  Number of CPUs : 1  OVF archive (for disk boot) : /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova  CPU Type : model_SandyBridge Please confirm installation settings (Yes, No)[Yes]: Once you confirm settings the hosted engine will be deployed and you will be prompted to connect to the console of the hosted engine.  Using remote-viewer connect to console of hosted engine.  [root@rhevh01 ~]# /bin/remote-viewer --spice-ca-file=/etc/pki/vdsm/libvirt-spice/ca-cert.pem spice://localhost?tls-port=5901 --spice-host-subject=&quot;C=EN, L=Test, O=Test, CN=Test&quot;   Configure authentication settings and set root password in the tools menu. Configure networking. Register with subscription manager.  [root@rhevm ~]# subscription-manager register [root@rhevm ~]# subscription-manager attach --pool=3948394898198989000922  Configure yum repositories.  [root@rhevm ~]# subscription-manager repos --disable=*  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-optional-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-supplementary-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhev-mgmt-agent-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhevm-3.5-rpms  Installed RHEV-M.  # yum update -y # yum install -y rhevm # engine-setup  After completing engine-setup go back to hypervisor and press [1] to continue hosted engine setup.  [ INFO ] Engine replied: DB Up!Welcome to Health Status!  Enter the name of the cluster to which you want to add the host (Default) [Default]: [ INFO ] Waiting for the host to become operational in the engine. This may take several minutes... [ INFO ] Still waiting for VDSM host to become operational... [ INFO ] Still waiting for VDSM host to become operational... [ INFO ] The VDSM Host is now operational  Please shutdown the VM allowing the system to launch it as a monitored service.  The system will wait until the VM is down.  Shutdown the hosted engine VM.  [root@rhevm ~]# shutdown -h now Once the hosted VM is shutdown, the installation completes. Congrats, you have successfully deployed a RHEV environment with the hosted engine option. Add Additional Hypervisor Host to RHEV-M Hosted Engine Adding an additional hypervisor host using the hosted engine is a simple process.  Enable required repositories.  [root@rhevh01 ~]# subscription-manager register [root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189 [root@rhevh02 ~]# subscription-manager repos --disable=* [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-optional-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms  [root@rhevh02 ~]# yum update -y  Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5.  [root@rhevh02 ~]# yum -y install iptables-services  Disable firewalld.  [root@rhevh02 ~]# systemctl stop firewalld [root@rhevh02 ~]# systemctl disable firewalld  Enable iptables (optional).  [root@rhevh02 ~]# systemctl enable iptables [root@rhevh02 ~]# systemctl start iptables  Configure iptables rules for RHEV and NFS (optional).  [root@rhevh02 ~]# vi /etc/sysconfig/iptables *filter :INPUT ACCEPT [0:0] :FORWARD ACCEPT [0:0] :OUTPUT ACCEPT [64:6816] -A INPUT -p udp -m udp --dport 32769 -j ACCEPT -A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT -A INPUT -p udp -m udp --dport 662 -j ACCEPT -A INPUT -p tcp -m tcp --dport 662 -j ACCEPT -A INPUT -p udp -m udp --dport 875 -j ACCEPT -A INPUT -p tcp -m tcp --dport 875 -j ACCEPT -A INPUT -p udp -m udp --dport 892 -j ACCEPT -A INPUT -p tcp -m tcp --dport 892 -j ACCEPT -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT -A INPUT -p icmp -j ACCEPT -A INPUT -i lo -j ACCEPT -A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT -A INPUT -p tcp -m tcp --dport 111 -j ACCEPT -A INPUT -p udp -m udp --dport 111 -j ACCEPT -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT -A INPUT -p udp -m udp --dport 161 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT -A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT -A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT -A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT -A INPUT -p udp -m udp --dport 963 -j ACCEPT -A INPUT -p tcp -m tcp --dport 965 -j ACCEPT -A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT -A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT -A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT -A INPUT -j REJECT --reject-with icmp-host-prohibited -A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibited COMMIT  Restart iptables (optional).  [root@rhevh02 ~]# systemctl restart iptables  Install Hosted Engine.  [root@rhevh02 ~]# yum install -y ovirt-hosted-engine-setup Note: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained here.  Install X11 libraries (optional).  [root@rhevh02 ~]# yum groupinstall -y &quot;Server with GUI&quot;  Configure Hosted Engine. Note: in this example screen is used and this is strongly recommended if installing through ssh connection.  [root@rhevh02 ~]# yum install -y screen [root@rhevh02 ~]# screen hosted-engine --deploy When prompted for storage connection, provide the same NFS share used when originally configuring hosted engine [rhevh01.lab:/usr/share/rhev]. The install script will detect the storage connection and instead of deploying hosted engine, will add the hypervisor host to already running hosted engine. In order to interact with the hosted engine, the hosted-engine CLI must be used. You can start, stop and get the status of the hosted engine using this CLI tool. [root@rhevh01 ~]# hosted-engine --vm-status">





  <meta name="twitter:site" content="@keithtenzer">
  <meta name="twitter:title" content="Red Hat Enterprise Virtualization (RHEV) - Management Options">
  <meta name="twitter:description" content="Overview RHEV has two separate distinct layers, the hypervisor itself and management. The hypervisor layer, RHEV-H is of course built on Red Hat Enterprise Linux (RHEL) and utilizes KVM for the hypervisor technology. RHEV-H can be configured using pre-built RHEV-H image or using standard RHEL. The management layer, Red Hat Enterprise Virtualization Management (RHEV-M) provides management for a multi-hypervisor environment and uses concepts such as datacenters, clusters, networks and storage domains to describe virtualization resources. In this article we will focus on options for configuring RHEV-M. The upstream opensource project behind RHEV-M is oVirt. There are two options as of RHEV 3.5 for configuring RHEV-M, standalone or hosted engine. Below are other articles you may find of interest relating to RHEV:  RHEV Overview and Home Lab Configuration RHEVM Overview and APIs RHEV Hypervisor Host Options   RHEV-M Standalone RHEV-M standalone means configuring a RHEL physical or virtual system as a RHEV-M host. PROS  Flexibility can install RHEV-M on any RHEL 6 host.  CONS  HA not built-in, you need to deal with HA on your own. Can&#39;t use RHEL 7. Requires additional host outside of virtualization environment. RHEV-M runs outside virtualization environment and as such cannot directly utilize virtualization resources such as storage.  To configure RHEV using this method follow the steps in this already posted article. RHEV-M Hosted Engine RHEV-M hosted engine means configuring RHEV-M as a virtual machine directly on a hypervisor host. RHEV-M lives inside the virtualization environment it is managing. Before configuring hypervisor host, RHEV-M must be configured. As such hosted engine is installed using yum directly on chosen hypervisor host. Simply install RHEL 7 and follow the steps listed further below in this article. PROS  Takes advantage of RHEV, HA is built-in. Simplified and streamlined installation of RHEV. Does not require separate host system.  CONS  At least one hypervisor must be running in order to access RHEV-M. If there are multiple-separate virtualization environments complexity could be greater.  Follow the below guide to configure a RHEV environment using the hosted engine.  Enable required repositories.  [root@rhevh01 ~]# subscription-manager register [root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189 [root@rhevh01 ~]# subscription-manager repos --disable=* [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-optional-rpms [root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms  [root@rhevh01 ~]# yum update -y The hosted engine requires an NFS or ISCSI share. In this case we will use NFSv3 and create a local share on our hypervisor host. This storage is only used for hosted engine and won&#39;t show up in RHEV-M.  Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5, at least that has been my experience.  [root@rhevh01 ~]# yum -y install iptables-services  Disable firewalld.  [root@rhevh01 ~]# systemctl stop firewalld [root@rhevh01 ~]# systemctl disable firewalld  Enable iptables (optional).  [root@rhevh01 ~]# systemctl enable iptables [root@rhevh01 ~]# systemctl start iptables  Configure iptables rules for RHEV and NFS (optional).  [root@rhevh01 ~]# vi /etc/sysconfig/iptables *filter :INPUT ACCEPT [0:0] :FORWARD ACCEPT [0:0] :OUTPUT ACCEPT [64:6816] -A INPUT -p udp -m udp --dport 32769 -j ACCEPT -A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT -A INPUT -p udp -m udp --dport 662 -j ACCEPT -A INPUT -p tcp -m tcp --dport 662 -j ACCEPT -A INPUT -p udp -m udp --dport 875 -j ACCEPT -A INPUT -p tcp -m tcp --dport 875 -j ACCEPT -A INPUT -p udp -m udp --dport 892 -j ACCEPT -A INPUT -p tcp -m tcp --dport 892 -j ACCEPT -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT -A INPUT -p icmp -j ACCEPT -A INPUT -i lo -j ACCEPT -A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT -A INPUT -p tcp -m tcp --dport 111 -j ACCEPT -A INPUT -p udp -m udp --dport 111 -j ACCEPT -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT -A INPUT -p udp -m udp --dport 161 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT -A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT -A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT -A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT -A INPUT -p udp -m udp --dport 963 -j ACCEPT -A INPUT -p tcp -m tcp --dport 965 -j ACCEPT -A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT -A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT -A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT -A INPUT -j REJECT --reject-with icmp-host-prohibited -A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibited COMMIT  Restart iptables (optional).  [root@rhevh01 ~]# systemctl restart iptables  Configure NFS Services.  [root@rhevh01 ~]# yum install nfs-utils rpcbind [root@rhevh01 ~]# systemctl enable rpcbind [root@rhevh01 ~]# systemctl enable nfs-server [root@rhevh01 ~]# systemctl start rpcbind [root@rhevh01 ~]# systemctl start nfs-server  Configure NFS Share.  [root@rhevh01 ~]# mkdir /usr/share/rhev [root@rhevh01 ~]# chown -R 36:36 /usr/share/rhev [root@rhevh01 ~]# chmod -R 0755 /usr/share/rhev [root@rhevh01 ~]# vi /etc/exports  /usr/share/rhev 192.168.2.0/24(rw) [root@rhevh01 ~]# exportfs -a  Install Hosted Engine.  [root@rhevh01 ~]# yum install -y ovirt-hosted-engine-setup Note: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained here.  Install X11 libraries (optional).  [root@rhevh01 ~]# yum groupinstall -y &quot;Server with GUI&quot;  Configure Hosted Engine. Note: in this example, screen is used and this is strongly recommended if installing through ssh connection. In fact, anytime you are working through ssh you should use screen, if something unexpected happens you can reconnect.  [root@rhevh01 ~]# yum install -y screen [root@rhevh01 ~]# screen hosted-engine --deploy --== VM CONFIGURATION ==-- Please specify the device to boot the VM from (cdrom, disk, pxe) [cdrom]: disk  Please specify path to OVF archive you would like to use [None]: /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova [ INFO ] Checking OVF archive content (could take a few minutes depending on archive size) [ INFO ] Checking OVF XML content (could take a few minutes depending on archive size) [WARNING] OVF does not contain a valid image description, using default.  Please specify an alias for the Hosted Engine image [hosted_engine]:  The following CPU types are supported by this host:  - model_SandyBridge: Intel SandyBridge Family  - model_Westmere: Intel Westmere Family  - model_Nehalem: Intel Nehalem Family  - model_Penryn: Intel Penryn Family  - model_Conroe: Intel Conroe Family  Please specify the CPU type to be used by the VM [model_SandyBridge]: [WARNING] Minimum requirements for CPUs not met  You may specify a unicast MAC address for the VM or accept a randomly generated default [00:16:3e:04:eb:78]:  Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]: spice --== HOSTED ENGINE CONFIGURATION ==-- Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]:  Enter &#39;admin@internal&#39; user password that will be used for accessing the Administrator Portal:  Confirm &#39;admin@internal&#39; user password:  Please provide the FQDN for the engine you would like to use.  This needs to match the FQDN that you will use for the engine installation within the VM.  Note: This will be the FQDN of the VM you are now going to create,  it should not point to the base host or to any other existing machine.  Engine FQDN: he01.lab [WARNING] Failed to resolve he01.lab using DNS, it can be resolved only locally  Please provide the name of the SMTP server through which we will send notifications [localhost]:  Please provide the TCP port number of the SMTP server [25]:  Please provide the email address from which notifications will be sent [root@localhost]:  Please provide a comma-separated list of email addresses which will get notifications [root@localhost]: [ INFO ] Stage: Setup validation [WARNING] Failed to resolve rhevh01.lab using DNS, it can be resolved only locally --== CONFIGURATION PREVIEW ==-- Bridge interface : eno1  Engine FQDN : he01.lab  Bridge name : rhevm  SSH daemon port : 22  Firewall manager : iptables  Gateway address : 192.168.0.1  Host name for web application : hosted_engine_1  Host ID : 1  Image alias : hosted_engine  Image size GB : 50  Storage connection : rhevh01.lab:/usr/share/rhev  Console type : qxl  Memory size MB : 4096  MAC address : 00:16:3e:04:eb:78  Boot type : disk  Number of CPUs : 1  OVF archive (for disk boot) : /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova  CPU Type : model_SandyBridge Please confirm installation settings (Yes, No)[Yes]: Once you confirm settings the hosted engine will be deployed and you will be prompted to connect to the console of the hosted engine.  Using remote-viewer connect to console of hosted engine.  [root@rhevh01 ~]# /bin/remote-viewer --spice-ca-file=/etc/pki/vdsm/libvirt-spice/ca-cert.pem spice://localhost?tls-port=5901 --spice-host-subject=&quot;C=EN, L=Test, O=Test, CN=Test&quot;   Configure authentication settings and set root password in the tools menu. Configure networking. Register with subscription manager.  [root@rhevm ~]# subscription-manager register [root@rhevm ~]# subscription-manager attach --pool=3948394898198989000922  Configure yum repositories.  [root@rhevm ~]# subscription-manager repos --disable=*  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-optional-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-supplementary-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhev-mgmt-agent-rpms  [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhevm-3.5-rpms  Installed RHEV-M.  # yum update -y # yum install -y rhevm # engine-setup  After completing engine-setup go back to hypervisor and press [1] to continue hosted engine setup.  [ INFO ] Engine replied: DB Up!Welcome to Health Status!  Enter the name of the cluster to which you want to add the host (Default) [Default]: [ INFO ] Waiting for the host to become operational in the engine. This may take several minutes... [ INFO ] Still waiting for VDSM host to become operational... [ INFO ] Still waiting for VDSM host to become operational... [ INFO ] The VDSM Host is now operational  Please shutdown the VM allowing the system to launch it as a monitored service.  The system will wait until the VM is down.  Shutdown the hosted engine VM.  [root@rhevm ~]# shutdown -h now Once the hosted VM is shutdown, the installation completes. Congrats, you have successfully deployed a RHEV environment with the hosted engine option. Add Additional Hypervisor Host to RHEV-M Hosted Engine Adding an additional hypervisor host using the hosted engine is a simple process.  Enable required repositories.  [root@rhevh01 ~]# subscription-manager register [root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189 [root@rhevh02 ~]# subscription-manager repos --disable=* [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-optional-rpms [root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms  [root@rhevh02 ~]# yum update -y  Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5.  [root@rhevh02 ~]# yum -y install iptables-services  Disable firewalld.  [root@rhevh02 ~]# systemctl stop firewalld [root@rhevh02 ~]# systemctl disable firewalld  Enable iptables (optional).  [root@rhevh02 ~]# systemctl enable iptables [root@rhevh02 ~]# systemctl start iptables  Configure iptables rules for RHEV and NFS (optional).  [root@rhevh02 ~]# vi /etc/sysconfig/iptables *filter :INPUT ACCEPT [0:0] :FORWARD ACCEPT [0:0] :OUTPUT ACCEPT [64:6816] -A INPUT -p udp -m udp --dport 32769 -j ACCEPT -A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT -A INPUT -p udp -m udp --dport 662 -j ACCEPT -A INPUT -p tcp -m tcp --dport 662 -j ACCEPT -A INPUT -p udp -m udp --dport 875 -j ACCEPT -A INPUT -p tcp -m tcp --dport 875 -j ACCEPT -A INPUT -p udp -m udp --dport 892 -j ACCEPT -A INPUT -p tcp -m tcp --dport 892 -j ACCEPT -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT -A INPUT -p icmp -j ACCEPT -A INPUT -i lo -j ACCEPT -A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT -A INPUT -p tcp -m tcp --dport 111 -j ACCEPT -A INPUT -p udp -m udp --dport 111 -j ACCEPT -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT -A INPUT -p udp -m udp --dport 161 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT -A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT -A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT -A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT -A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT -A INPUT -p udp -m udp --dport 963 -j ACCEPT -A INPUT -p tcp -m tcp --dport 965 -j ACCEPT -A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT -A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT -A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT -A INPUT -j REJECT --reject-with icmp-host-prohibited -A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibited COMMIT  Restart iptables (optional).  [root@rhevh02 ~]# systemctl restart iptables  Install Hosted Engine.  [root@rhevh02 ~]# yum install -y ovirt-hosted-engine-setup Note: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained here.  Install X11 libraries (optional).  [root@rhevh02 ~]# yum groupinstall -y &quot;Server with GUI&quot;  Configure Hosted Engine. Note: in this example screen is used and this is strongly recommended if installing through ssh connection.  [root@rhevh02 ~]# yum install -y screen [root@rhevh02 ~]# screen hosted-engine --deploy When prompted for storage connection, provide the same NFS share used when originally configuring hosted engine [rhevh01.lab:/usr/share/rhev]. The install script will detect the storage connection and instead of deploying hosted engine, will add the hypervisor host to already running hosted engine. In order to interact with the hosted engine, the hosted-engine CLI must be used. You can start, stop and get the status of the hosted engine using this CLI tool. [root@rhevh01 ~]# hosted-engine --vm-status">
  <meta name="twitter:url" content="http://localhost:4000/rhev/red-hat-enterprise-virtualization-rhev-management-options/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2016-01-11T00:00:00-08:00">





  

  


<link rel="canonical" href="http://localhost:4000/rhev/red-hat-enterprise-virtualization-rhev-management-options/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Keith Tenzer",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Keith Tenzer's Blog Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Keith Tenzer's Blog
          <span class="site-subtitle">Cloud Computing and Code</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/index.html">About</a>
            </li><li class="masthead__menu-item">
              <a href="/conferences-and-events/index.html">Conferences and Events</a>
            </li><li class="masthead__menu-item">
              <a href="/videos/index.html">Videos</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#rhev" itemprop="item"><span itemprop="name">Rhev</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Red Hat Enterprise Virtualization (RHEV) - Management Options</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/main/me.png" alt="Keith Tenzer" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Keith Tenzer</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Principal Solutions Architect at Red Hat</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Los Angeles, CA</span>
        </li>
      

      
        
          
        
          
        
          
            <li><a href="https://twitter.com/keithtenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
        
          
            <li><a href="https://github.com/ktenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Red Hat Enterprise Virtualization (RHEV) - Management Options">
    <meta itemprop="description" content="OverviewRHEV has two separate distinct layers, the hypervisor itself and management. The hypervisor layer, RHEV-H is of course built on Red Hat Enterprise Linux (RHEL) and utilizes KVM for the hypervisor technology. RHEV-H can be configured using pre-built RHEV-H image or using standard RHEL. The management layer, Red Hat Enterprise Virtualization Management (RHEV-M) provides management for a multi-hypervisor environment and uses concepts such as datacenters, clusters, networks and storage domains to describe virtualization resources. In this article we will focus on options for configuring RHEV-M. The upstream opensource project behind RHEV-M is oVirt. There are two options as of RHEV 3.5 for configuring RHEV-M, standalone or hosted engine.Below are other articles you may find of interest relating to RHEV:RHEV Overview and Home Lab ConfigurationRHEVM Overview and APIsRHEV Hypervisor Host OptionsRHEV-M StandaloneRHEV-M standalone means configuring a RHEL physical or virtual system as a RHEV-M host.PROSFlexibility can install RHEV-M on any RHEL 6 host.CONSHA not built-in, you need to deal with HA on your own.Can&#39;t use RHEL 7.Requires additional host outside of virtualization environment.RHEV-M runs outside virtualization environment and as such cannot directly utilize virtualization resources such as storage.To configure RHEV using this method follow the steps in this already posted article.RHEV-M Hosted EngineRHEV-M hosted engine means configuring RHEV-M as a virtual machine directly on a hypervisor host. RHEV-M lives inside the virtualization environment it is managing. Before configuring hypervisor host, RHEV-M must be configured. As such hosted engine is installed using yum directly on chosen hypervisor host. Simply install RHEL 7 and follow the steps listed further below in this article.PROSTakes advantage of RHEV, HA is built-in.Simplified and streamlined installation of RHEV.Does not require separate host system.CONSAt least one hypervisor must be running in order to access RHEV-M.If there are multiple-separate virtualization environments complexity could be greater.Follow the below guide to configure a RHEV environment using the hosted engine.Enable required repositories.[root@rhevh01 ~]# subscription-manager register[root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189[root@rhevh01 ~]# subscription-manager repos --disable=*[root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rpms[root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms[root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-optional-rpms[root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms [root@rhevh01 ~]# yum update -yThe hosted engine requires an NFS or ISCSI share. In this case we will use NFSv3 and create a local share on our hypervisor host. This storage is only used for hosted engine and won&#39;t show up in RHEV-M.Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5, at least that has been my experience.[root@rhevh01 ~]# yum -y install iptables-servicesDisable firewalld.[root@rhevh01 ~]# systemctl stop firewalld[root@rhevh01 ~]# systemctl disable firewalldEnable iptables (optional).[root@rhevh01 ~]# systemctl enable iptables[root@rhevh01 ~]# systemctl start iptablesConfigure iptables rules for RHEV and NFS (optional).[root@rhevh01 ~]# vi /etc/sysconfig/iptables*filter:INPUT ACCEPT [0:0]:FORWARD ACCEPT [0:0]:OUTPUT ACCEPT [64:6816]-A INPUT -p udp -m udp --dport 32769 -j ACCEPT-A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT-A INPUT -p udp -m udp --dport 662 -j ACCEPT-A INPUT -p tcp -m tcp --dport 662 -j ACCEPT-A INPUT -p udp -m udp --dport 875 -j ACCEPT-A INPUT -p tcp -m tcp --dport 875 -j ACCEPT-A INPUT -p udp -m udp --dport 892 -j ACCEPT-A INPUT -p tcp -m tcp --dport 892 -j ACCEPT-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT-A INPUT -p icmp -j ACCEPT-A INPUT -i lo -j ACCEPT-A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT-A INPUT -p tcp -m tcp --dport 111 -j ACCEPT-A INPUT -p udp -m udp --dport 111 -j ACCEPT-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT-A INPUT -p udp -m udp --dport 161 -j ACCEPT-A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT-A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT-A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT-A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT-A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT-A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT-A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT-A INPUT -p udp -m udp --dport 963 -j ACCEPT-A INPUT -p tcp -m tcp --dport 965 -j ACCEPT-A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT-A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT-A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT-A INPUT -j REJECT --reject-with icmp-host-prohibited-A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibitedCOMMITRestart iptables (optional).[root@rhevh01 ~]# systemctl restart iptablesConfigure NFS Services.[root@rhevh01 ~]# yum install nfs-utils rpcbind[root@rhevh01 ~]# systemctl enable rpcbind[root@rhevh01 ~]# systemctl enable nfs-server[root@rhevh01 ~]# systemctl start rpcbind[root@rhevh01 ~]# systemctl start nfs-serverConfigure NFS Share.[root@rhevh01 ~]# mkdir /usr/share/rhev[root@rhevh01 ~]# chown -R 36:36 /usr/share/rhev[root@rhevh01 ~]# chmod -R 0755 /usr/share/rhev[root@rhevh01 ~]# vi /etc/exports /usr/share/rhev 192.168.2.0/24(rw)[root@rhevh01 ~]# exportfs -aInstall Hosted Engine.[root@rhevh01 ~]# yum install -y ovirt-hosted-engine-setupNote: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained here.Install X11 libraries (optional).[root@rhevh01 ~]# yum groupinstall -y &quot;Server with GUI&quot;Configure Hosted Engine. Note: in this example, screen is used and this is strongly recommended if installing through ssh connection. In fact, anytime you are working through ssh you should use screen, if something unexpected happens you can reconnect.[root@rhevh01 ~]# yum install -y screen[root@rhevh01 ~]# screen hosted-engine --deploy--== VM CONFIGURATION ==--Please specify the device to boot the VM from (cdrom, disk, pxe) [cdrom]: disk Please specify path to OVF archive you would like to use [None]: /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova[ INFO ] Checking OVF archive content (could take a few minutes depending on archive size)[ INFO ] Checking OVF XML content (could take a few minutes depending on archive size)[WARNING] OVF does not contain a valid image description, using default. Please specify an alias for the Hosted Engine image [hosted_engine]: The following CPU types are supported by this host: - model_SandyBridge: Intel SandyBridge Family - model_Westmere: Intel Westmere Family - model_Nehalem: Intel Nehalem Family - model_Penryn: Intel Penryn Family - model_Conroe: Intel Conroe Family Please specify the CPU type to be used by the VM [model_SandyBridge]:[WARNING] Minimum requirements for CPUs not met You may specify a unicast MAC address for the VM or accept a randomly generated default [00:16:3e:04:eb:78]: Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]: spice--== HOSTED ENGINE CONFIGURATION ==--Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]: Enter &#39;admin@internal&#39; user password that will be used for accessing the Administrator Portal: Confirm &#39;admin@internal&#39; user password: Please provide the FQDN for the engine you would like to use. This needs to match the FQDN that you will use for the engine installation within the VM. Note: This will be the FQDN of the VM you are now going to create, it should not point to the base host or to any other existing machine. Engine FQDN: he01.lab[WARNING] Failed to resolve he01.lab using DNS, it can be resolved only locally Please provide the name of the SMTP server through which we will send notifications [localhost]: Please provide the TCP port number of the SMTP server [25]: Please provide the email address from which notifications will be sent [root@localhost]: Please provide a comma-separated list of email addresses which will get notifications [root@localhost]:[ INFO ] Stage: Setup validation[WARNING] Failed to resolve rhevh01.lab using DNS, it can be resolved only locally--== CONFIGURATION PREVIEW ==--Bridge interface : eno1 Engine FQDN : he01.lab Bridge name : rhevm SSH daemon port : 22 Firewall manager : iptables Gateway address : 192.168.0.1 Host name for web application : hosted_engine_1 Host ID : 1 Image alias : hosted_engine Image size GB : 50 Storage connection : rhevh01.lab:/usr/share/rhev Console type : qxl Memory size MB : 4096 MAC address : 00:16:3e:04:eb:78 Boot type : disk Number of CPUs : 1 OVF archive (for disk boot) : /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova CPU Type : model_SandyBridgePlease confirm installation settings (Yes, No)[Yes]:Once you confirm settings the hosted engine will be deployed and you will be prompted to connect to the console of the hosted engine.Using remote-viewer connect to console of hosted engine.[root@rhevh01 ~]# /bin/remote-viewer --spice-ca-file=/etc/pki/vdsm/libvirt-spice/ca-cert.pem spice://localhost?tls-port=5901 --spice-host-subject=&quot;C=EN, L=Test, O=Test, CN=Test&quot;Configure authentication settings and set root password in the tools menu.Configure networking.Register with subscription manager.[root@rhevm ~]# subscription-manager register[root@rhevm ~]# subscription-manager attach --pool=3948394898198989000922Configure yum repositories.[root@rhevm ~]# subscription-manager repos --disable=* [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rpms [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-optional-rpms [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-supplementary-rpms [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhev-mgmt-agent-rpms [root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhevm-3.5-rpmsInstalled RHEV-M.# yum update -y# yum install -y rhevm# engine-setupAfter completing engine-setup go back to hypervisor and press [1] to continue hosted engine setup.[ INFO ] Engine replied: DB Up!Welcome to Health Status! Enter the name of the cluster to which you want to add the host (Default) [Default]:[ INFO ] Waiting for the host to become operational in the engine. This may take several minutes...[ INFO ] Still waiting for VDSM host to become operational...[ INFO ] Still waiting for VDSM host to become operational...[ INFO ] The VDSM Host is now operational Please shutdown the VM allowing the system to launch it as a monitored service. The system will wait until the VM is down.Shutdown the hosted engine VM.[root@rhevm ~]# shutdown -h nowOnce the hosted VM is shutdown, the installation completes. Congrats, you have successfully deployed a RHEV environment with the hosted engine option.Add Additional Hypervisor Host to RHEV-M Hosted EngineAdding an additional hypervisor host using the hosted engine is a simple process.Enable required repositories.[root@rhevh01 ~]# subscription-manager register[root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189[root@rhevh02 ~]# subscription-manager repos --disable=*[root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rpms[root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms[root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-optional-rpms[root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms [root@rhevh02 ~]# yum update -yInstall iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5.[root@rhevh02 ~]# yum -y install iptables-servicesDisable firewalld.[root@rhevh02 ~]# systemctl stop firewalld[root@rhevh02 ~]# systemctl disable firewalldEnable iptables (optional).[root@rhevh02 ~]# systemctl enable iptables[root@rhevh02 ~]# systemctl start iptablesConfigure iptables rules for RHEV and NFS (optional).[root@rhevh02 ~]# vi /etc/sysconfig/iptables*filter:INPUT ACCEPT [0:0]:FORWARD ACCEPT [0:0]:OUTPUT ACCEPT [64:6816]-A INPUT -p udp -m udp --dport 32769 -j ACCEPT-A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT-A INPUT -p udp -m udp --dport 662 -j ACCEPT-A INPUT -p tcp -m tcp --dport 662 -j ACCEPT-A INPUT -p udp -m udp --dport 875 -j ACCEPT-A INPUT -p tcp -m tcp --dport 875 -j ACCEPT-A INPUT -p udp -m udp --dport 892 -j ACCEPT-A INPUT -p tcp -m tcp --dport 892 -j ACCEPT-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT-A INPUT -p icmp -j ACCEPT-A INPUT -i lo -j ACCEPT-A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT-A INPUT -p tcp -m tcp --dport 111 -j ACCEPT-A INPUT -p udp -m udp --dport 111 -j ACCEPT-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT-A INPUT -p udp -m udp --dport 161 -j ACCEPT-A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT-A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT-A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT-A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT-A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT-A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT-A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT-A INPUT -p udp -m udp --dport 963 -j ACCEPT-A INPUT -p tcp -m tcp --dport 965 -j ACCEPT-A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT-A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT-A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT-A INPUT -j REJECT --reject-with icmp-host-prohibited-A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibitedCOMMITRestart iptables (optional).[root@rhevh02 ~]# systemctl restart iptablesInstall Hosted Engine.[root@rhevh02 ~]# yum install -y ovirt-hosted-engine-setupNote: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained here.Install X11 libraries (optional).[root@rhevh02 ~]# yum groupinstall -y &quot;Server with GUI&quot;Configure Hosted Engine. Note: in this example screen is used and this is strongly recommended if installing through ssh connection.[root@rhevh02 ~]# yum install -y screen[root@rhevh02 ~]# screen hosted-engine --deployWhen prompted for storage connection, provide the same NFS share used when originally configuring hosted engine [rhevh01.lab:/usr/share/rhev]. The install script will detect the storage connection and instead of deploying hosted engine, will add the hypervisor host to already running hosted engine.In order to interact with the hosted engine, the hosted-engine CLI must be used. You can start, stop and get the status of the hosted engine using this CLI tool.[root@rhevh01 ~]# hosted-engine --vm-status">
    <meta itemprop="datePublished" content="2016-01-11T00:00:00-08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Red Hat Enterprise Virtualization (RHEV) - Management Options
</h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2016-01-11T00:00:00-08:00">January 11, 2016</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          25 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <h3><a href="https://keithtenzer.files.wordpress.com/2015/12/ovirt_300x100.png" rel="attachment wp-att-1469"><img class="alignnone size-full wp-image-1469" src="/assets/2016/01/ovirt_300x100.png" alt="oVirt_300x100" width="300" height="100" /></a></h3>
<h3>Overview</h3>
<p>RHEV has two separate distinct layers, the hypervisor itself and management. The hypervisor layer, RHEV-H is of course built on Red Hat Enterprise Linux (RHEL) and utilizes KVM for the hypervisor technology. RHEV-H can be configured using pre-built RHEV-H image or using standard RHEL. The management layer, Red Hat Enterprise Virtualization Management (RHEV-M) provides management for a multi-hypervisor environment and uses concepts such as datacenters, clusters, networks and storage domains to describe virtualization resources. In this article we will focus on options for configuring RHEV-M. The upstream opensource project behind RHEV-M is <a href="http://www.ovirt.org/Home">oVirt</a>. There are two options as of RHEV 3.5 for configuring RHEV-M, standalone or hosted engine.</p>
<p>Below are other articles you may find of interest relating to RHEV:</p>
<ul>
<li><a href="http://keithtenzer.com/2015/01/05/red-hat-enterprise-virtualization-rhev-home-lab-configuration/">RHEV Overview and Home Lab Configuration</a></li>
<li><a href="http://keithtenzer.com/2015/01/08/red-hat-enterprise-virtualization-management-rhev-m-overview-apis-and-code-examples/">RHEVM Overview and APIs</a></li>
<li><a href="http://keithtenzer.com/2015/06/18/red-hat-enterprise-virtualization-rhev-hypervisor-host-options/">RHEV Hypervisor Host Options</a></li>
</ul>
<p><!--more--></p>
<h3>RHEV-M Standalone</h3>
<p>RHEV-M standalone means configuring a RHEL physical or virtual system as a RHEV-M host.</p>
<p><strong>PROS</strong></p>
<ul>
<li>Flexibility can install RHEV-M on any RHEL 6 host.</li>
</ul>
<p><strong>CONS</strong></p>
<ul>
<li>HA not built-in, you need to deal with HA on your own.</li>
<li>Can't use RHEL 7.</li>
<li>Requires additional host outside of virtualization environment.</li>
<li>RHEV-M runs outside virtualization environment and as such cannot directly utilize virtualization resources such as storage.</li>
</ul>
<p>To configure RHEV using this method follow the steps in this already posted <a href="http://keithtenzer.com/2015/06/18/red-hat-enterprise-virtualization-rhev-hypervisor-host-options/">article</a>.</p>
<h3>RHEV-M Hosted Engine</h3>
<p>RHEV-M hosted engine means configuring RHEV-M as a virtual machine directly on a hypervisor host. RHEV-M lives inside the virtualization environment it is managing. Before configuring hypervisor host, RHEV-M must be configured. As such hosted engine is installed using yum directly on chosen hypervisor host. Simply install RHEL 7 and follow the steps listed further below in this article.</p>
<p><strong>PROS</strong></p>
<ul>
<li>Takes advantage of RHEV, HA is built-in.</li>
<li>Simplified and streamlined installation of RHEV.</li>
<li>Does not require separate host system.</li>
</ul>
<p><strong>CONS</strong></p>
<ul>
<li>At least one hypervisor must be running in order to access RHEV-M.</li>
<li>If there are multiple-separate virtualization environments complexity could be greater.</li>
</ul>
<p>Follow the below guide to configure a RHEV environment using the hosted engine.</p>
<ul>
<li>Enable required repositories.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# subscription-manager register
[root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189
[root@rhevh01 ~]# subscription-manager repos --disable=*
[root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-rpms
[root@rhevh01 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms
[root@rhevh01 ~]# <code>subscription-manager repos --enable=rhel-7-server-optional-rpms
</code>[root@rhevh01 ~]# <code></code>subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms 
[root@rhevh01 ~]# yum update -y</pre>
<p>The hosted engine requires an NFS or ISCSI share. In this case we will use NFSv3 and create a local share on our hypervisor host. This storage is only used for hosted engine and won't show up in RHEV-M.</p>
<ul>
<li>Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5, at least that has been my experience.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# yum -y install iptables-services</pre>
<ul>
<li>Disable firewalld.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# systemctl stop firewalld
[root@rhevh01 ~]# systemctl disable firewalld</pre>
<ul>
<li>Enable iptables (optional).</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# systemctl enable iptables
[root@rhevh01 ~]# systemctl start iptables</pre>
<ul>
<li>Configure iptables rules for RHEV and NFS (optional).</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# vi /etc/sysconfig/iptables</pre>
<pre style="padding-left:30px;">*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [64:6816]
-A INPUT -p udp -m udp --dport 32769 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT
-A INPUT -p udp -m udp --dport 662 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 662 -j ACCEPT
-A INPUT -p udp -m udp --dport 875 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 875 -j ACCEPT
-A INPUT -p udp -m udp --dport 892 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 892 -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 111 -j ACCEPT
-A INPUT -p udp -m udp --dport 111 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -p udp -m udp --dport 161 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT
-A INPUT -p udp -m udp --dport 963 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 965 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT
-A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT
-A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibited
COMMIT</pre>
<ul>
<li>Restart iptables (optional).</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# systemctl restart iptables</pre>
<ul>
<li>Configure NFS Services.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# yum install nfs-utils rpcbind
[root@rhevh01 ~]# systemctl enable rpcbind
[root@rhevh01 ~]# systemctl enable nfs-server
[root@rhevh01 ~]# systemctl start rpcbind
[root@rhevh01 ~]# systemctl start nfs-server</pre>
<ul>
<li>Configure NFS Share.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# mkdir /usr/share/rhev
[root@rhevh01 ~]# chown -R 36:36 /usr/share/rhev
[root@rhevh01 ~]# chmod -R 0755 /usr/share/rhev</pre>
<pre style="padding-left:30px;">[root@rhevh01 ~]# vi /etc/exports 
/usr/share/rhev 192.168.2.0/24(rw)</pre>
<pre style="padding-left:30px;">[root@rhevh01 ~]# exportfs -a</pre>
<ul>
<li>Install Hosted Engine.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# yum install -y ovirt-hosted-engine-setup</pre>
<p>Note: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained <a href="https://wiki.utdallas.edu/wiki/display/FAQ/X11+Forwarding+using+Xming+and+PuTTY">here</a>.</p>
<ul>
<li>Install X11 libraries (optional).</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# yum groupinstall -y "Server with GUI"</pre>
<ul>
<li>Configure Hosted Engine. Note: in this example, screen is used and this is strongly recommended if installing through ssh connection. In fact, anytime you are working through ssh you should use screen, if something unexpected happens you can reconnect.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# yum install -y screen</pre>
<pre style="padding-left:30px;">[root@rhevh01 ~]# screen hosted-engine --deploy</pre>
<pre style="padding-left:30px;">--== VM CONFIGURATION ==--</pre>
<pre style="padding-left:30px;">Please specify the device to boot the VM from (cdrom, disk, pxe) [cdrom]: disk
 Please specify path to OVF archive you would like to use [None]: /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova
[ INFO ] Checking OVF archive content (could take a few minutes depending on archive size)
[ INFO ] Checking OVF XML content (could take a few minutes depending on archive size)
[WARNING] OVF does not contain a valid image description, using default.
 Please specify an alias for the Hosted Engine image [hosted_engine]:
 The following CPU types are supported by this host:
 - model_SandyBridge: Intel SandyBridge Family
 - model_Westmere: Intel Westmere Family
 - model_Nehalem: Intel Nehalem Family
 - model_Penryn: Intel Penryn Family
 - model_Conroe: Intel Conroe Family
 Please specify the CPU type to be used by the VM [model_SandyBridge]:
[WARNING] Minimum requirements for CPUs not met
 You may specify a unicast MAC address for the VM or accept a randomly generated default [00:16:3e:04:eb:78]:
 Please specify the console type you would like to use to connect to the VM (vnc, spice) [vnc]: spice</pre>
<pre style="padding-left:30px;">--== HOSTED ENGINE CONFIGURATION ==--</pre>
<pre style="padding-left:30px;">Enter the name which will be used to identify this host inside the Administrator Portal [hosted_engine_1]:
 Enter 'admin@internal' user password that will be used for accessing the Administrator Portal:
 Confirm 'admin@internal' user password:
 Please provide the FQDN for the engine you would like to use.
 This needs to match the FQDN that you will use for the engine installation within the VM.
 Note: This will be the FQDN of the VM you are now going to create,
 it should not point to the base host or to any other existing machine.
 Engine FQDN: he01.lab
[WARNING] Failed to resolve he01.lab using DNS, it can be resolved only locally
 Please provide the name of the SMTP server through which we will send notifications [localhost]:
 Please provide the TCP port number of the SMTP server [25]:
 Please provide the email address from which notifications will be sent [root@localhost]:
 Please provide a comma-separated list of email addresses which will get notifications [root@localhost]:
[ INFO ] Stage: Setup validation
[WARNING] Failed to resolve rhevh01.lab using DNS, it can be resolved only locally</pre>
<pre style="padding-left:30px;">--== CONFIGURATION PREVIEW ==--</pre>
<pre style="padding-left:30px;">Bridge interface : eno1
 Engine FQDN : he01.lab
 Bridge name : rhevm
 SSH daemon port : 22
 Firewall manager : iptables
 Gateway address : 192.168.0.1
 Host name for web application : hosted_engine_1
 Host ID : 1
 Image alias : hosted_engine
 Image size GB : 50
 Storage connection : rhevh01.lab:/usr/share/rhev
 Console type : qxl
 Memory size MB : 4096
 MAC address : 00:16:3e:04:eb:78
 Boot type : disk
 Number of CPUs : 1
 OVF archive (for disk boot) : /usr/share/rhev/rhevm-appliance-20150421.0-1.x86_64.rhevm.ova
 CPU Type : model_SandyBridge</pre>
<pre style="padding-left:30px;">Please confirm installation settings (Yes, No)[Yes]:</pre>
<p>Once you confirm settings the hosted engine will be deployed and you will be prompted to connect to the console of the hosted engine.</p>
<ul>
<li>Using remote-viewer connect to console of hosted engine.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# /bin/remote-viewer --spice-ca-file=/etc/pki/vdsm/libvirt-spice/ca-cert.pem spice://localhost?tls-port=5901 --spice-host-subject="C=EN, L=Test, O=Test, CN=Test"</pre>
<p><a href="https://keithtenzer.files.wordpress.com/2016/01/hosted_engine_setup_tool.jpg" rel="attachment wp-att-1489"><img class="alignnone wp-image-1489" src="/assets/2016/01/hosted_engine_setup_tool.jpg?w=300" alt="Hosted_Engine_Setup_Tool" width="1266" height="650" /></a></p>
<ul>
<li>Configure authentication settings and set root password in the tools menu.</li>
<li>Configure networking.</li>
<li>Register with subscription manager.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevm ~]# subscription-manager register</pre>
<pre style="padding-left:30px;">[root@rhevm ~]# subscription-manager attach --pool=3948394898198989000922</pre>
<ul>
<li>Configure yum repositories.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevm ~]# subscription-manager repos --disable=* 
[root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rpms 
[root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-optional-rpms 
[root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-supplementary-rpms 
[root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhev-mgmt-agent-rpms 
[root@rhevm ~]# subscription-manager repos --enable=rhel-6-server-rhevm-3.5-rpms</pre>
<ul>
<li>Installed RHEV-M.</li>
</ul>
<pre style="padding-left:30px;"># yum update -y</pre>
<pre style="padding-left:30px;"># yum install -y rhevm</pre>
<pre style="padding-left:30px;"># engine-setup</pre>
<ul>
<li>After completing engine-setup go back to hypervisor and press [1] to continue hosted engine setup.</li>
</ul>
<pre style="padding-left:30px;">[ INFO ] Engine replied: DB Up!Welcome to Health Status!
 Enter the name of the cluster to which you want to add the host (Default) [Default]:
[ INFO ] Waiting for the host to become operational in the engine. This may take several minutes...
[ INFO ] Still waiting for VDSM host to become operational...
[ INFO ] Still waiting for VDSM host to become operational...
[ INFO ] The VDSM Host is now operational
 Please shutdown the VM allowing the system to launch it as a monitored service.
 The system will wait until the VM is down.</pre>
<ul>
<li>Shutdown the hosted engine VM.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevm ~]# shutdown -h now</pre>
<p>Once the hosted VM is shutdown, the installation completes. Congrats, you have successfully deployed a RHEV environment with the hosted engine option.</p>
<h3>Add Additional Hypervisor Host to RHEV-M Hosted Engine</h3>
<p>Adding an additional hypervisor host using the hosted engine is a simple process.</p>
<ul>
<li>Enable required repositories.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh01 ~]# subscription-manager register
[root@rhevh01 ~]# subscription-manager attach --pool=3848378728191899189
[root@rhevh02 ~]# subscription-manager repos --disable=*
[root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-rpms
[root@rhevh02 ~]# subscription-manager repos --enable=rhel-7-server-supplementary-rpms
[root@rhevh02 ~]# <code>subscription-manager repos --enable=rhel-7-server-optional-rpms
</code>[root@rhevh02 ~]# <code></code>subscription-manager repos --enable=rhel-7-server-rhev-mgmt-agent-rpms 
[root@rhevh02 ~]# yum update -y</pre>
<ul>
<li>Install iptables (optional). Note: as of writing of this article, firewalld does not work with RHEV 3.5.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh02 ~]# yum -y install iptables-services</pre>
<ul>
<li>Disable firewalld.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh02 ~]# systemctl stop firewalld
[root@rhevh02 ~]# systemctl disable firewalld</pre>
<ul>
<li>Enable iptables (optional).</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh02 ~]# systemctl enable iptables
[root@rhevh02 ~]# systemctl start iptables</pre>
<ul>
<li>Configure iptables rules for RHEV and NFS (optional).</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh02 ~]# vi /etc/sysconfig/iptables</pre>
<pre style="padding-left:30px;">*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [64:6816]
-A INPUT -p udp -m udp --dport 32769 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 32803 -j ACCEPT
-A INPUT -p udp -m udp --dport 662 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 662 -j ACCEPT
-A INPUT -p udp -m udp --dport 875 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 875 -j ACCEPT
-A INPUT -p udp -m udp --dport 892 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 892 -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -i lo -j ACCEPT
-A INPUT -p tcp -m tcp --dport 54321 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 111 -j ACCEPT
-A INPUT -p udp -m udp --dport 111 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -p udp -m udp --dport 161 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 38465 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 38466 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 38467 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 2049 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 39543 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 55863 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 38468 -j ACCEPT
-A INPUT -p udp -m udp --dport 963 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 965 -j ACCEPT
-A INPUT -p tcp -m tcp --dport 16514 -j ACCEPT
-A INPUT -p tcp -m multiport --dports 5900:6923 -j ACCEPT
-A INPUT -p tcp -m multiport --dports 49152:49216 -j ACCEPT
-A INPUT -j REJECT --reject-with icmp-host-prohibited
-A FORWARD -m physdev ! --physdev-is-bridged -j REJECT --reject-with icmp-host-prohibited
COMMIT</pre>
<ul>
<li>Restart iptables (optional).</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh02 ~]# systemctl restart iptables</pre>
<ul>
<li>Install Hosted Engine.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh02 ~]# yum install -y ovirt-hosted-engine-setup</pre>
<p>Note: if you are connecting via ssh you will need to forward X11. If you are using windows then you need to install Xming and Putty explained <a href="https://wiki.utdallas.edu/wiki/display/FAQ/X11+Forwarding+using+Xming+and+PuTTY">here</a>.</p>
<ul>
<li>Install X11 libraries (optional).</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh02 ~]# yum groupinstall -y "Server with GUI"</pre>
<ul>
<li>Configure Hosted Engine. Note: in this example screen is used and this is strongly recommended if installing through ssh connection.</li>
</ul>
<pre style="padding-left:30px;">[root@rhevh02 ~]# yum install -y screen</pre>
<pre style="padding-left:30px;">[root@rhevh02 ~]# screen hosted-engine --deploy</pre>
<p>When prompted for storage connection, provide the same NFS share used when originally configuring hosted engine [rhevh01.lab:/usr/share/rhev]. The install script will detect the storage connection and instead of deploying hosted engine, will add the hypervisor host to already running hosted engine.</p>
<p>In order to interact with the hosted engine, the hosted-engine CLI must be used. You can start, stop and get the status of the hosted engine using this CLI tool.</p>
<pre style="padding-left:30px;">[root@rhevh01 ~]# hosted-engine --vm-status

--== Host 1 status ==--

Status up-to-date : True
Hostname : rhevh01.lab
Host ID : 1
Engine status : {"reason": "bad vm status", "health": "bad", "vm": "up", "detail": "powering up"}
Score : 2400
Local maintenance : False
Host timestamp : 386
Extra metadata (valid at timestamp):
 metadata_parse_version=1
 metadata_feature_version=1
 timestamp=386 (Sat Jan 2 11:06:10 2016)
 host-id=1
 score=2400
 maintenance=False
 state=EngineStarting

--== Host 2 status ==--

Status up-to-date : False
Hostname : rhevh02.lab
Host ID : 2
Engine status : unknown stale-data
Score : 2400
Local maintenance : False
Host timestamp : 444
Extra metadata (valid at timestamp):
 metadata_parse_version=1
 metadata_feature_version=1
 timestamp=444 (Sat Jan 2 11:06:17 2016)
 host-id=2
 score=2400
 maintenance=False
 state=EngineDown</pre>
<h3>Summary</h3>
<p>In this article we have examined the different options for deploying Red Hat Enterprise Virtualization Management (RHEV-M). We have discussed the various trade-offs when using RHEV-M standalone or hosted engine. Unless special requirements exist, the best option is definitely the hosted engine approach. Finally we have seen how to configure RHEV-M using both standalone (discussed in previous article) and hosted engine.</p>
<p>Virtualization technology has become a commodity but not its management. The once dominant proprietary virtualization solutions no longer provide the same competitive edge. Opensource virtualization such as RHEV allow independence and avoid vendor lock-in to costly proprietary management solutions.</p>
<p>The greatest benefit of KVM over other virtualization technologies is the APIs and management are literally wide open. OpenStack for example interfaces with KVM hypervisors directly, it doesn't need RHEV-M because KVM is open and follows open standards. OpenStack when interfacing with other virtualization technologies, such as VMware and Hyper-V, requires proprietary management which is not only costly but quite limiting. The question we all should be asking is, do we want to drag proprietary management solutions with us on our journey to the cloud? Now is the time to make the switch and move to KVM by implementing RHEV. If you find yourself on the journey to opensource virtualization, I strongly suggest reading the other articles posted above. Together we grow so please share.</p>
<p>Happy RHEVing!</p>
<p>(c) 2016 Keith Tenzer</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#kvm" class="page__taxonomy-item" rel="tag">KVM</a><span class="sep">, </span>
    
      <a href="/tags/#linux" class="page__taxonomy-item" rel="tag">Linux</a><span class="sep">, </span>
    
      <a href="/tags/#rhev-h" class="page__taxonomy-item" rel="tag">RHEV-H</a><span class="sep">, </span>
    
      <a href="/tags/#rhev-m" class="page__taxonomy-item" rel="tag">RHEV-M</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#rhev" class="page__taxonomy-item" rel="tag">RHEV</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2016-01-11T00:00:00-08:00">January 11, 2016</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=keithtenzer&text=Red+Hat+Enterprise+Virtualization+%28RHEV%29+-+Management+Options%20http%3A%2F%2Flocalhost%3A4000%2Frhev%2Fred-hat-enterprise-virtualization-rhev-management-options%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Frhev%2Fred-hat-enterprise-virtualization-rhev-management-options%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Frhev%2Fred-hat-enterprise-virtualization-rhev-management-options%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/openstack/openstack-liberty-lab-installation-and-configuration-guide/" class="pagination--pager" title="OpenStack Liberty Lab Installation and Configuration Guide
">Previous</a>
    
    
      <a href="/openstack/openstack-keystone-integrating-ldap-with-ipa/" class="pagination--pager" title="OpenStack Keystone: Integrating LDAP with IPA
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/linux/blog-with-gitops-practices-and-github/" rel="permalink">Blog with Gitops Practices and GitHub
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-02-10T00:00:00-08:00">February 10, 2022</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          13 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Overview
Want to build your brand while living the gitops revolution and not paying anything for it? That is exactly what this article will walk you through....</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/linux/The-Fedora-Workstation-Experience/" rel="permalink">The Fedora Workstation Experience
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2022-01-10T00:00:00-08:00">January 10, 2022</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          10 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">
Overview
A lot of people always ask me what is the best way to contribute to opensource? Of course contributing code, documentation, spreading the gospel or...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/openshift/building-ansible-operators-1-2-3/" rel="permalink">Building Ansible Operators 1-2-3
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-12-03T00:00:00-08:00">December 3, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          10 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Overview
In this article we will go step by step to build a Kubernetes Operator using Ansible and the Operator Framework. Operators provide the ability to no...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/openshift/openshift-service-mesh-getting-started-guide/" rel="permalink">OpenShift Service Mesh Getting Started Guide
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-04-27T00:00:00-07:00">April 27, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">






Overview
In this article we will explore the OpenShift Service Mesh and deploy a demo application to better understand the various concepts. First you...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/keithtenzer"" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/ktenzer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Keith Tenzer. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>







  </body>
</html>
