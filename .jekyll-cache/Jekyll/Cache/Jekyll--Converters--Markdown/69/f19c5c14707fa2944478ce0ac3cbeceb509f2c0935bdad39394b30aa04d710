I"8<h2><img class="alignnone size-full wp-image-1215" src="/assets/2018/07/rdo.jpg" alt="rdo" width="355" height="142" /></h2>
<h2 class="entry-content">Overview</h2>
<div class="entry-content">
<p>In this article we will focus on installing and configuring OpenStack Queens using RDO and the packstack installer. RDO is a community platform around Red Hat’s Enterprise OpenStack Distribution. It allows you to test the latest OpenStack capabilities on a stable platform such as Red Hat Enterprise Linux (RHEL) or CentOS. This guide will take you through setting up Hetzner root server, preparing environment for OpenStack, installing the OpenStack Queens release, adding a floating ip subnet through OVS, configuring networking, security groups, flavors, images and are other OpenStack related services. The outcome is a working OpenStack environment based on the Queens release that you can use as a baseline for testing your applications using OpenStack capabilities. The installation will create an all-in-one deployment however you can use this guide to create a multi-node deployment as well.<br />
<!--more--></p>
<h2>Root Server Specs</h2>
<pre>CPU: Intel(R) Core(TM) i7-3930K CPU @ 3.20GHz (12 Cores)
Memory: 64GB RAM
Disk: 2 x 3TB SATA
Network: 1Gbit
IPV4 Adresses: 1 x IPV4 + /29 Subnet (6 IPs)</pre>
<p>Hetzner is a hosting providing and auctions off used hardware for very competitive prices on a per/month basis (<a href="https://www.hetzner.de/sb">https://www.hetzner.de/sb</a>). Hetzner provides one IP for each root server that is accessible via internet. It is a /32 so if you want additional IPs, like you would for OpenStack to use as floating ips you need to order additional subnet. You can order an additional subnet as I have done. Hetzner will route that subnet through the host IP of the /32. This requires creating an additional OVS bridge in OpenStack and this guide will go through that configuration.</p>
<h2>Configure Root Server</h2>
<p>As mentioned, Hetzner will give you access to your root server via IP and provide ability to manage the root server. Basic things like put root server in rescue mode or reboot. You can provide public ssh key or use password to access system. Please don't use password, this is the internet, bad things can and will happen.</p>
<p><strong>Enter Rescue Mode</strong></p>
<p>In order to install OS or repair it you need to get into rescue mode.</p>
<p><img class="alignnone size-full wp-image-12310" src="/assets/2018/07/hetzner_1.png" alt="hetzner_1" width="772" height="262" /></p>
<p><img class="alignnone size-full wp-image-12311" src="/assets/2018/07/hetzner_2.png" alt="hetzner_2" width="772" height="262" /></p>
<p><img class="alignnone size-full wp-image-12312" src="/assets/2018/07/hetzner_3.png" alt="hetzner_3" width="790" height="363" /></p>
<p><strong>Configure Hetzner Firewall.</strong></p>
<p>While server is rebootting you can modify your servers firewall rules for incoming traffic. By default firewall allows port 22 for SSH and nothing else. Firewall settings can be modified under your server's settings in Hetzner's web UI <a href="https://robot.your-server.de/server" rel="nofollow">https://robot.your-server.de/server</a>. For OpenStack I would recommend 80, 443, 22 and ICMP.</p>
<p><img class="alignnone size-full wp-image-12321" src="/assets/2018/07/hetzner_firewall_osp.png" alt="hetzner_firewall_osp" width="1718" height="678" /></p>
<p>If you plan on running OpenShift on OpenStack you need to add some additional rules.</p>
<p><img class="alignnone size-full wp-image-12320" src="/assets/2018/07/hetzner_firewalld1.png" alt="hetzner_firewalld" width="1665" height="537" /></p>
<p><strong>Connect to root server via ssh and private key.</strong></p>
<pre># ssh -i .ssh/id_rsa.pub</pre>
<p><strong>Create Root Server Configuration.</strong></p>
<p>The root server in this case has two disks. They are being configured in non-redundant RAID 1 (stripping) configuration. OpenStack requires decent disk performance, I found when using mirroring it was not enough. If you want redundant configuration you need to pay extra for SSDs. Since we will setup LVM partitions, creating one for Cinder (cinder-volumes) is a good idea. You don't want to use loop back driver for Cinder. Finally you can provide your own image (if you want to use RHEL, you must do so).</p>
<p>My colleague Andy Neeb also automated deployment using Hetzner API. If you are interested in automated deployment here is his Github repository: <a href="https://github.com/andyneeb/ansible-hetzner">https://github.com/andyneeb/ansible-hetzner</a>.</p>
<p>[CENTOS]</p>
<pre># vi config.txt
</pre></div>
:ET